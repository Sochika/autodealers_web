import{f as c}from"./index.esm.js";import"./auth.esm.js";import P from"./PsLabel2.js";import k from"./PsLabelTitle2.js";import w from"./PsLabelCaption3.js";import x from"./PsButton2.js";import V from"./PsInput2.js";import C from"./PsErrorDialog2.js";import{i as v,j as U,J as d,r as l,o as M,c as N,b as i,w as p,O as B,a as g,p as r,t as I}from"./app.js";import{P as h}from"./PsUtils.js";import{_ as L}from"./plugin-vue_export-helper.js";import"./PsModal2.js";import"./vue-neat-modal.js";import"./PsLine.js";const W={name:"VerifyPhone",components:{PsLabel:P,PsLabelTitle:k,PsButton:x,PsInput:V,PsLabelCaption:w,PsErrorDialog:C},props:["authUser","firebaseConfig"],setup(a){let n,s;const t=v(),u=v(""),b=JSON.parse(a.firebaseConfig);c.apps.length<1&&c.initializeApp(b),U(async()=>{window.recaptchaVerifier=new c.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:o=>{h.log("Callback"),h.log(o)},"expired-callback":()=>{h.log("expiry callback")}}),n=window.recaptchaVerifier;const e=n;s=await c.auth().signInWithPhoneNumber(a.authUser.user_phone,e).catch(o=>{t.value.openModal(d("phone_login__error_in_sign_in"),o==null?void 0:o.message)})});async function f(){const e=n;s=await c.auth().signInWithPhoneNumber(a.authUser.user_phone,e).catch(o=>{t.value.openModal(d("phone_login__error_in_sign_in"),o==null?void 0:o.message)})}async function m(){s!=null&&s.confirm(u.value).then(async e=>{e!=null&&e.user!=null&&e.user.uid!=null&&e.user.uid!=""&&(e.user,B.Inertia.post(route("updateVerify"),{verify_type:"4",user_id:a.authUser.id}))}).catch(e=>{t.value.openModal(d("phone_login__error_in_sign_in"),e==null?void 0:e.message)})}return{clicked:m,ps_error_dialog:t,code:u,resendMessage:f}}},j={class:"text-center items-center justify-center flex flex-col w-full h-screen"},z=r(" Please verify your phone "),D=r("We have sent verification code to this phone : "),E={class:"text-fePrimary-500"},J=r(" submit"),O=r(" resend"),R=g("div",{id:"recaptcha-container"},null,-1),S=r(),T=g("br",null,null,-1);function A(a,n,s,t,u,b){const f=l("ps-label-title"),m=l("ps-label"),e=l("ps-input"),o=l("ps-button"),y=l("ps-error-dialog");return M(),N("div",j,[i(f,{class:"mb-4"},{default:p(()=>[z]),_:1}),i(m,null,{default:p(()=>{var _;return[D,g("span",E,I((_=s.authUser)==null?void 0:_.user_phone),1)]}),_:1}),i(e,{class:"my-1 w-60",value:t.code,"onUpdate:value":n[0]||(n[0]=_=>t.code=_)},null,8,["value"]),i(o,{class:"my-1",onClick:t.clicked},{default:p(()=>[J]),_:1},8,["onClick"]),i(o,{class:"my-1",onClick:t.resendMessage},{default:p(()=>[O]),_:1},8,["onClick"]),i(y,{ref:"ps_error_dialog"},null,512),R,S,T])}var se=L(W,[["render",A]]);export{se as default};
