import{d as x,K as M,i as w,j as $,N as D,M as V,P as B,r as c,o as u,c as f,a as t,h as O,b as a,w as s,p as S,t as L,F as P,q as H,n as A,g as T}from"./app.js";import j from"./PsIcon2.js";import z from"./PsDropdown.js";import F from"./PsDropdownSelect.js";import R from"./PsIconToggle.js";import U from"./PsLabel2.js";import q from"./LocationModal.js";import{P as E}from"./PsValueStore.js";import{u as G}from"./AppInfoStore.js";import{u as K}from"./ItemLocationTownshipStore.js";import{L as J,u as Q}from"./LocationParameterHolder.js";import{A as W}from"./AppInfoParameterHolder.js";import{_ as X}from"./plugin-vue_export-helper.js";import"./PsModal2.js";import"./vue-neat-modal.js";import"./PsLine.js";import"./PsButton2.js";import"./PsInputWithLeftIcon.js";import"./PsLabelCaption3.js";import"./ps_constants.js";import"./PsApiService2.js";import"./PsObject.js";import"./DefaultPhoto.js";import"./ItemLocationTownship.js";import"./PsSepetetedStore.js";const Y=x({components:{PsIcon:j,PsIconToggle:R,PsDropdown:z,PsLabel:U,PsDropdownSelect:F,LocationModal:q},props:{topOfPage:{type:Boolean,default:!1}},setup(o){const d=M(),v=w(localStorage.activeLanguage),i=E(),p=G(),_=i.getLoginUserId(),m=new J().getDefaultParameterHolder(),n=new W;n.userId=_,p.loadAppInfo(n);const g=Q("navtab-location"),h=K("navtab-township"),b=w(!0),e=w();function l(r){B(r.symbol),d.dispatch("handleActiveLanguage",r.symbol)}function k(){e.value.openModal()}async function y(){var I,N;await g.resetItemLocationList(_,m);let r=(N=(I=p.appInfo.data)==null?void 0:I.psAppSetting)==null?void 0:N.isSubLocation;(localStorage.locationName===""||localStorage.locationName===void 0)&&(localStorage.locationName="All",localStorage.locationId="",localStorage.locationLat="",localStorage.locationLng=""),r=="1"&&(localStorage.subLocationName===""||localStorage.subLocationName===void 0)?(localStorage.subLocationId="",localStorage.subLocationName="All"):r!="1"&&(localStorage.subLocationName!==""||localStorage.subLocationName!==void 0)&&(localStorage.subLocationId="",localStorage.subLocationName=""),i.replaceLocation(localStorage.locationId,localStorage.locationName,localStorage.locationLat,localStorage.locationLng),i.replaceSubLocation(localStorage.subLocationId,localStorage.subLocationName)}function C(){window.location.pathname.includes("item-list")?location.replace(window.location.origin+window.location.pathname+`?item_location_id=${localStorage.locationId}&item_location_township_id=${localStorage.subLocationId}&order_by=added_date&order_type=desc&status=1`):window.location.reload()}return $(()=>{y()}),{handleLanguage:l,activeLanguage:v,dataReady:b,ps_location_modal:e,itemLocationTownshipStore:h,itemLocationStore:g,openLocationModal:k,changeLocation:C,loadLocationData:y,appInfoStore:p,psValueStore:i}},methods:{...D(["toggleDarkMode"])},computed:{...V(["isDarkMode"])}}),Z={class:"xl:w-feLarge lg:w-large w-full flex justify-between mx-4 sm:mx-6 lg:mx-auto"},oo={key:0,class:"flex gap-4"},eo={class:""},ao=["id"],to={class:"rounded-md shadow-xs w-32"},no={class:"pt-2 z-30"},so=["onClick"],io={class:"flex items-center gap-3"},lo=S("Dark");function ro(o,d,v,i,p,_){const m=c("ps-icon"),n=c("ps-label"),g=c("ps-dropdown"),h=c("ps-icon-toggle"),b=c("location-modal");return u(),f(P,null,[t("nav",{class:A(["fixed z-50 w-full h-10 flex items-center bg-feSecondary-900",o.topOfPage?" ":"hidden"])},[t("div",Z,[t("div",{class:"flex items-center cursor-pointer",onClick:d[0]||(d[0]=O((...e)=>o.openLocationModal&&o.openLocationModal(...e),["prevent"]))},[a(m,{name:"locationBig",class:"text-feSecondary-100 me-2"}),a(n,{textColor:"text-feSecondary-200 dark_text-feAchromatic-50",class:"text-sm hidden md:block"},{default:s(()=>{var e,l;return[S(L(o.psValueStore.locationName)+L(((l=(e=o.appInfoStore.appInfo.data)==null?void 0:e.psAppSetting)==null?void 0:l.isSubLocation)=="1"?`,${o.psValueStore.subLocationName}`:""),1)]}),_:1})]),o.dataReady?(u(),f("div",oo,[t("div",eo,[a(g,{align:"left"},{select:s(()=>[a(n,{class:""},{default:s(()=>[t("button",{type:"button",class:"inline-flex items-center content-start justify-between w-full leading-5 font-medium text-sm focus:outline-none transition ease-in-out duration-150 btn-focus text-feAchromatic-50",id:o.$page.props.languages.filter(e=>e.symbol==o.activeLanguage)[0].name,"aria-haspopup":"true","aria-expanded":"true"},[S(L(o.$page.props.languages.filter(e=>e.symbol==o.activeLanguage)[0].name)+" ",1),a(m,{name:"downArrow",textColor:"text-feAchromatic-50",class:"ms-2",w:"24",h:"24"})],8,ao)]),_:1})]),list:s(()=>[t("div",to,[t("div",no,[(u(!0),f(P,null,H(o.$page.props.languages,e=>(u(),f("div",{key:e.id,class:"w-56 flex py-4 px-2 hover_bg-fePrimary-50 dark_hover_bg-fePrimary-900 cursor-pointer items-center",onClick:l=>o.handleLanguage(e)},[a(n,{class:A(["ms-2",e.symbol==o.activeLanguage?" font-bold":""])},{default:s(()=>[S(L(e.name),1)]),_:2},1032,["class"])],8,so))),128))])])]),_:1})]),t("div",io,[a(n,{textColor:"text-feAchromatic-50"},{default:s(()=>[lo]),_:1}),a(h,{toggleOffIcon:"day",selectedValue:o.isDarkMode,onOnChange:o.toggleDarkMode},null,8,["selectedValue","onOnChange"])])])):T("",!0)])],2),a(b,{onChangeLocation:o.changeLocation,ref:"ps_location_modal"},null,8,["onChangeLocation"])],64)}var Bo=X(Y,[["render",ro]]);export{Bo as default};
