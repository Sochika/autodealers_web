import{U as L}from"./UpdaterLayout.js";import{P}from"./PsButton.js";import{P as S}from"./PsLoadingCircleDialog.js";import{P as x,a as B}from"./PsSuccessDialog.js";import{P as C}from"./PsReloadDialog.js";import{d as T,O as b,i as a,r as t,o as d,c as N,b as l,w as c,a as k,t as _,f as v,p as y,J as n}from"./app.js";import{_ as U}from"./plugin-vue_export-helper.js";import"./PsIcon.js";import"./Icons.js";import"./PsModal.js";import"./vue-neat-modal.js";import"./PsLabel.js";import"./PsLoading.js";const M=T({components:{UpdaterLayout:L,Link:b.Link,PsButton:P,PsLoadingCircleDialog:S,PsErrorDialog:x,PsSuccessDialog:B,PsReloadDialog:C},props:["status"],setup(e){const s=a(),p=a(),h=a(),u=a(),g=a(0),o=a(!1);console.log(e.status);function r(){u.value.openModal(n("ps_success_dialog__update_process_complete"),n(e.status.msg),"Done","admin.index",!1,"checkCircle")}function f(){b.Inertia.post(route("NextLaravelUpdater::builderTableFieldSync"),{},{onBefore:()=>{s.value.openModal(n("core__be_sync_table_title"),n("core__be_table_field_syncing_note")),o.value=!0},onSuccess:i=>{console.log(e.status),o.value=!1,e.status.flag=="success"&&(g.value=1,s.value.closeModal(),o.value=!0,r())},onError:i=>{o.value=!1,s.value.closeModal(),p.value.openModal(n("ps_error_dialog__error"),n(i.message),"OK")}})}function m(){o.value=!0,b.Inertia.get(route("admin.index"))}return{goToDashboard:m,handleFieldTableSync:f,ps_loading_circle_dialog:s,ps_error_dialog:p,isGoNext:g,ps_success_dialog:h,ps_reload_dialog:u,openSuccessDialog:r,isLoading:o}},mounted(){this.status.flag=="success"&&this.openSuccessDialog()},beforeUpdate(){}}),F={class:"paragraph text-center"},E={class:"buttons"};function V(e,s,p,h,u,g){const o=t("ps-button"),r=t("UpdaterLayout"),f=t("ps-loading-circle-dialog"),m=t("ps-error-dialog"),i=t("ps-success-dialog"),D=t("ps-reload-dialog");return d(),N("div",null,[l(r,{title:"sync_tables_and_fields"},{container:c(()=>[k("p",F,_(e.$t("sync_tables_and_fields_desc")),1),k("div",E,[e.isLoading?(d(),v(o,{key:0,disabled:!0,class:"button",type:"reset",padding:"px-7 py-2",rounded:"rounded",hover:""},{default:c(()=>[y(_(e.$t("core__be_loading")),1)]),_:1})):e.isGoNext?(d(),v(o,{key:1,onClick:s[0]||(s[0]=$=>e.goToDashboard()),class:"button",type:"reset",padding:"px-7 py-2",rounded:"rounded",hover:""},{default:c(()=>[y(_(e.$t("go_next")),1)]),_:1})):(d(),v(o,{key:2,onClick:s[1]||(s[1]=$=>e.handleFieldTableSync()),class:"button",type:"reset",padding:"px-7 py-2",rounded:"rounded",hover:""},{default:c(()=>[y(_(e.$t("code_sync")),1)]),_:1}))])]),_:1}),l(f,{ref:"ps_loading_circle_dialog"},null,512),l(m,{ref:"ps_error_dialog"},null,512),l(i,{ref:"ps_success_dialog"},null,512),l(D,{ref:"ps_reload_dialog"},null,512)])}var W=U(M,[["render",V]]);export{W as default};
