import{aA as j,aB as q,d as G,H as J,i as B,R as Q,J as O,r as c,o as u,c as m,b as o,w as n,a as d,p as a,t as s,h as X,F as L,q as R,m as k,v as g,n as Y,g as v,s as Z,ak as x,f as N}from"./app.js";import{b as ee,g as te,d as oe}from"./PsLayout.js";import{u as re}from"./Validators.js";import{P as ne}from"./PsInput.js";import{P as le}from"./PsLabel.js";import{P as se}from"./PsButton.js";import{P as ae}from"./PsCard.js";import{P as ie}from"./PsIcon.js";import{P as de}from"./PsTextarea.js";import{P as pe}from"./PsLoading.js";import{P as ue}from"./PsCheckboxValue.js";import{a as me,P as ye}from"./PsActionModal.js";import{P as ce}from"./PsBreadcrumb2.js";import{P as be}from"./PsLabelCaption.js";import ve from"./CheckBox3.js";import{_ as ke}from"./plugin-vue_export-helper.js";import"./PsToggle.js";import"./toggle.js";import"./PsModal.js";import"./vue-neat-modal.js";import"./index.esm.js";import"./auth.esm.js";import"./PsSuccessDialog.js";import"./PsInputWithRightIcon.js";import"./PsBannerIcon.js";import"./PsIcon1.js";import"./Icons.js";import"./PsLoadingCircleDialog.js";import"./PsLabelHeader4.js";import"./PsDraggable.js";const ge=j(()=>q(()=>import("./GoogleMapPinPicker.js"),["GoogleMapPinPicker.js","index.js","app.js","app.css","plugin-vue_export-helper.js"])),_e=j(()=>q(()=>import("./OpenStreetMapPinPicker.js"),["OpenStreetMapPinPicker.js","OpenStreetMapPinPicker.css","app.js","app.css","Control.Geocoder.js","Control.Geocoder.css","plugin-vue_export-helper.js"])),Ce=G({name:"Edit",components:{Head:J,GoogleMapPinPicker:ge,OpenStreetMap:_e,PsInput:ne,PsLabel:le,CheckBox:ve,PsButton:se,PsLabelHeader6:ee,PsCard:ae,PsTextarea:de,PsIcon:ie,PsLoading:pe,PsCheckboxValue:ue,PsActionModal:me,PsImageIconModal:ye,PsDangerDialog:te,PsBreadcrumb2:ce,PsLabelCaption:be},layout:oe,props:["errors","city","customizeHeaders","customizeDetails","coreFieldFilterSettings","backendSettings"],setup(e){const i=B(!1),w=B(!1),C=B(),E=B(),F=B(),{isEmpty:f,minLength:D,isLatitude:I,isLongitude:y,isNum:$}=re(),b=(l,p)=>{e.errors[l]=p?D(l,p,3):f(l,p),l=="name"&&(C.value.isError=!!Boolean(e.errors.name))},U=(l,p)=>{e.errors[l]=p?I(l,p):f(l,p),l=="lat"&&(E.value.isError=!!Boolean(e.errors.lat))},z=(l,p)=>{e.errors[l]=p?y(l,p):f(l,p),l=="lng"&&(F.value.isError=!!Boolean(e.errors.lng))},S=(l,p,P="")=>{e.errors[l]=p?"":f(l,p,P)},h=(l,p,P="",V="")=>{e.errors[l]=p?$(l,p,V):f(l,p,P)},H=l=>{let p=l.keyCode?l.keyCode:l.which;(p<48||p>57)&&l.preventDefault()},T=l=>{let p=l.keyCode?l.keyCode:l.which;(p<48||p>57)&&p!==46&&p!==45&&l.preventDefault()};let _=Q({id:e.city.id,name:e.city.name,ordering:e.city.ordering,lat:e.city.lat,lng:e.city.lng,description:e.city.description,ordering:e.city.ordering,city_relation:{},_method:"put"});function M(l){this.$inertia.post(route("city.update",l),_,{forceFormData:!0,onBefore:()=>{i.value=!0},onSuccess:()=>{i.value=!1,w.value=!0,setTimeout(()=>{this.$inertia.get(route("city.index"))},500)},onError:()=>{i.value=!1,C.value.isError=!!Boolean(e.errors.name),E.value.isError=!!Boolean(e.errors.lat),F.value.isError=!!Boolean(e.errors.lng)}})}function A(l){_.lat=l.latLng.lat(),_.lng=l.latLng.lng()}function K(l){_.lat=l.lat,_.lng=l.lng}return{validateLocationNameInput:b,setCoordinates:K,validateLatitudeInput:U,validateLongitudeInput:z,form:_,loading:i,success:w,handleSubmit:M,updateCoordinates:A,validateEmptyInput:S,validateNumberInput:h,onlyNumber:H,onlyNumberWithCustom:T,name:C,lat:E,lng:F}},created(){this.customizeHeaders.map((e,i)=>{this.city.city_relation.map(w=>{if(e.core_keys_id===w.core_keys_id){let C=w.value;this.form.city_relation[e.core_keys_id]=C==="1"?!0:C==="0"?!1:C}})})},computed:{breadcrumb(){return[{label:O("core__be_dashboard_label"),url:route("admin.index")},{label:O("city_module"),url:route("city.index")},{label:O("core__edit_city"),color:"text-primary-500"}]}},methods:{handleCancel(){this.$inertia.get(route("city.index"))},handleMultiSelect({data:e,id:i}){this.form.city_relation[i]=e.toString()}}}),$e={class:"rounded-xl"},fe={class:"bg-primary-50 dark:bg-primary-900 py-2.5 ps-4 rounded-t-xl"},we={class:"px-4 pt-6 dark:bg-backgroundDark"},Pe={class:"grid w-full sm:w-1/2 gap-6"},Be=d("span",{class:"text-red-800 font-medium ms-1"},"*",-1),Ee={key:0,class:"mb-6"},Fe={key:1,class:"mb-6"},Ue={key:0,class:"mb-4"},Ke={class:"text-red-800 font-medium ms-1"},Le={class:"rounded-md shadow-xs w-full"},De={class:"pt-2"},Ie={key:0},ze={key:1},Se=["onClick"],he={key:1,class:"mb-4"},He=a("*"),Te={key:2,class:"mb-4"},Me={class:"text-red-800 font-medium ms-1"},Ae={class:"flex flex-row"},Ve={key:3,class:"mb-4"},Oe={class:"flex flex-row"},Re={class:"me-2 flex"},We=["onUpdate:modelValue","onChange"],Ne={key:4,class:"mb-4"},je={class:"text-red-800 font-medium ms-1"},qe={key:5,class:"mb-4"},Ge={class:"text-red-800 font-medium ms-1"},Je={key:6,class:"mb-4"},Qe={class:"text-red-800 font-medium ms-1"},Xe={key:7,class:"mb-4"},Ye=a("*"),Ze={class:"flex flex-row"},xe={key:8,class:"mb-4"},et={class:"text-red-800 font-medium ms-1"},tt={key:9,class:"mb-4"},ot={class:"text-red-800 font-medium ms-1"},rt=["onUpdate:modelValue"],nt={key:10,class:"mb-4"},lt={class:"text-red-800 font-medium ms-1"},st={class:"flex flex-row justify-end mb-2.5"},at={key:2,class:"transition-all duration-300"},it={key:3,class:""};function dt(e,i,w,C,E,F){const f=c("Head"),D=c("ps-breadcrumb-2"),I=c("ps-label-header-6"),y=c("ps-label"),$=c("ps-input"),b=c("ps-label-caption"),U=c("ps-textarea"),z=c("google-map-pin-picker"),S=c("open-street-map"),h=c("ps-dropdown-select"),H=c("ps-dropdown"),T=c("ps-radio-value"),_=c("date-picker"),M=c("CheckBox"),A=c("ps-image-upload"),K=c("ps-button"),l=c("ps-loading"),p=c("ps-icon"),P=c("ps-card"),V=c("ps-layout");return u(),m(L,null,[o(f,{title:e.$t("core__edit_city")},null,8,["title"]),o(V,null,{default:n(()=>[o(D,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),o(P,{class:"w-full h-auto"},{default:n(()=>[d("div",$e,[d("div",fe,[o(I,{textColor:"text-secondary-800 dark:text-secondary-100"},{default:n(()=>[a(s(e.$t("core__city_info")),1)]),_:1})]),d("div",we,[d("form",{onSubmit:i[13]||(i[13]=X(t=>e.handleSubmit(this.city.id),["prevent"]))},[d("div",Pe,[d("div",null,[o(y,{class:"text-base mb-2"},{default:n(()=>[a(s(e.$t("core__be_city_name_label")),1),Be]),_:1}),o($,{type:"text",value:e.form.name,"onUpdate:value":i[0]||(i[0]=t=>e.form.name=t),placeholder:e.$t("core__be_city_name_placeholder"),onKeyup:i[1]||(i[1]=t=>e.validateLocationNameInput("name",e.form.name)),onBlur:i[2]||(i[2]=t=>e.validateLocationNameInput("name",e.form.name))},null,8,["value","placeholder"]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.errors.name),1)]),_:1})]),d("div",null,[o(y,{class:"text-base mb-2"},{default:n(()=>[a(s(e.$t("core__be_ordering_label")),1)]),_:1}),o($,{type:"text",value:e.form.ordering,"onUpdate:value":i[3]||(i[3]=t=>e.form.ordering=t),placeholder:e.$t("core__be_ordering_placeholder"),onKeypress:e.onlyNumber},null,8,["value","placeholder","onKeypress"]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.errors.ordering),1)]),_:1})]),d("div",null,[o(y,{class:"text-base mb-2"},{default:n(()=>[a(s(e.$t("core__be_description_label")),1)]),_:1}),o(U,{rows:"3",value:e.form.description,"onUpdate:value":i[4]||(i[4]=t=>e.form.description=t),placeholder:e.$t("core__be_description_placeholder")},null,8,["value","placeholder"]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.errors.description),1)]),_:1})]),e.backendSettings.is_google_map==1?(u(),m("div",Ee,[o(z,{mapKey:e.$page.props.mapKey,lat:parseFloat(e.form.lat),lng:parseFloat(e.form.lng),widthHeight:"width: 458px; height: 500px",onChange:e.updateCoordinates},null,8,["mapKey","lat","lng","onChange"])])):(u(),m("div",Fe,[o(S,{dir:e.$page.props.dir,onChange:e.setCoordinates,lat:parseFloat(e.form.lat),lng:parseFloat(e.form.lng),class:"h-[500px]"},null,8,["dir","onChange","lat","lng"])])),d("div",null,[o(y,{class:"text-base mb-2"},{default:n(()=>[a(s(e.$t("core__be_latitude_label")),1)]),_:1}),o($,{type:"text",value:e.form.lat,"onUpdate:value":i[5]||(i[5]=t=>e.form.lat=t),placeholder:e.$t("core__be_latitude_placeholder"),onKeypress:e.onlyNumberWithCustom,onKeyup:i[6]||(i[6]=t=>e.validateLatitudeInput("lat",e.form.lat)),onBlur:i[7]||(i[7]=t=>e.validateLatitudeInput("lat",e.form.lat))},null,8,["value","placeholder","onKeypress"]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.errors.lat),1)]),_:1})]),d("div",null,[o(y,{class:"text-base mb-2"},{default:n(()=>[a(s(e.$t("core__be_longitude_label")),1)]),_:1}),o($,{type:"text",value:e.form.lng,"onUpdate:value":i[8]||(i[8]=t=>e.form.lng=t),placeholder:e.$t("core__be_longitude_placeholder"),onKeypress:e.onlyNumberWithCustom,onKeyup:i[9]||(i[9]=t=>e.validateLongitudeInput("lng",e.form.lng)),onBlur:i[10]||(i[10]=t=>e.validateLongitudeInput("lng",e.form.lng))},null,8,["value","placeholder","onKeypress"]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.errors.lng),1)]),_:1})]),(u(!0),m(L,null,R(e.customizeHeaders,t=>(u(),m("div",{key:t.id},[t.ui_type_id==="uit00001"&&t.enable===1&&t.is_delete===0?(u(),m("div",Ue,[o(y,{class:"text-base"},{default:n(()=>[a(s(e.$t(t.name)),1),k(d("span",Ke,"*",512),[[g,t.mandatory==1]])]),_:2},1024),o(H,{align:"left",class:"lg:mt-2 mt-1 w-full"},{select:n(()=>[o(h,{ref_for:!0,ref:"currency",placeholder:e.$t(t.placeholder),showCenter:!0,selectedValue:this.customizeDetails.filter(r=>r.id==this.form.city_relation[t.core_keys_id]).length>0?this.customizeDetails.filter(r=>r.id==this.form.city_relation[t.core_keys_id])[0].name:"",onChange:r=>e.handleCustomFieldError(t),onBlur:r=>e.handleCustomFieldError(t)},null,8,["placeholder","selectedValue","onChange","onBlur"])]),list:n(()=>[d("div",Le,[d("div",De,[e.customizeDetails.filter(r=>r.core_keys_id===t.core_keys_id).length===0?(u(),m("div",Ie,[o(y,{class:"p-2 flex",onClick:i[11]||(i[11]=r=>e.route("currency.index"))},{default:n(()=>[a("Create new "+s(e.$t(t.name)),1)]),_:2},1024)])):(u(),m("div",ze,[(u(!0),m(L,null,R(e.customizeDetails.filter(r=>r.core_keys_id===t.core_keys_id),r=>(u(),m("div",{key:r.id,class:"w-96 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-secondary-700 cursor-pointer items-center",onClick:W=>[e.form.city_relation[t.core_keys_id]=r.id,e.validateEmptyInput("currency_id",e.form.city_relation[t.core_keys_id])]},[o(y,{class:Y(["ms-2",r.id==e.form.city_relation[t.core_keys_id]?" font-bold":""])},{default:n(()=>[a(s(r.name),1)]),_:2},1032,["class"])],8,Se))),128))]))])])]),_:2},1024),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):v("",!0),t.ui_type_id==="uit00002"&&t.enable===1&&t.is_delete===0?(u(),m("div",he,[o(y,null,{default:n(()=>[k(o(y,{class:"text-red-800 font-medium me-1"},{default:n(()=>[He]),_:2},1536),[[g,t.mandatory==1]]),a(s(e.$t(t.name)),1)]),_:2},1024),o($,{type:"text",class:"w-full rounded",placeholder:e.$t(t.placeholder),value:e.form.city_relation[t.core_keys_id],"onUpdate:value":r=>e.form.city_relation[t.core_keys_id]=r,onKeyup:r=>e.handleCustomFieldError(t),onBlur:r=>e.handleCustomFieldError(t)},null,8,["placeholder","value","onUpdate:value","onKeyup","onBlur"]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):v("",!0),t.ui_type_id==="uit00003"&&t.enable===1&&t.is_delete===0?(u(),m("div",Te,[o(y,{class:"text-base"},{default:n(()=>[a(s(e.$t(t.name))+" ",1),k(d("span",Me,"*",512),[[g,t.mandatory===1]])]),_:2},1024),d("div",Ae,[(u(!0),m(L,null,R(e.customizeDetails.filter(r=>r.core_keys_id===t.core_keys_id),r=>(u(),m("div",{class:"me-2",key:r.id},[o(T,{color:"text-purple-600 border-purple-300",value:e.form.city_relation[t.core_keys_id],"onUpdate:value":W=>e.form.city_relation[t.core_keys_id]=W,title:r.name},null,8,["value","onUpdate:value","title"]),o(y,{for:r.id},{default:n(()=>[a(s(r.attribute),1)]),_:2},1032,["for"])]))),128))]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):v("",!0),t.ui_type_id==="uit00004"&&t.enable===1&&t.is_delete===0?(u(),m("div",Ve,[d("div",Oe,[d("div",Re,[k(d("input",{type:"checkbox",class:"rounded border",value:"0","onUpdate:modelValue":r=>e.form.city_relation[t.core_keys_id]=r,onChange:r=>e.handleCustomFieldError(t)},null,40,We),[[Z,e.form.city_relation[t.core_keys_id]]]),o(y,{class:"ms-2"},{default:n(()=>[a(s(e.$t(t.name)),1)]),_:2},1024)])]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):v("",!0),t.ui_type_id==="uit00005"&&t.enable===1&&t.is_delete===0?(u(),m("div",Ne,[o(y,{class:"text-base"},{default:n(()=>[a(s(e.$t(t.name))+" ",1),k(d("span",je,"*",512),[[g,t.mandatory===1]])]),_:2},1024),d("div",null,[o(_,{value:e.form.city_relation[t.core_keys_id],"onUpdate:value":r=>e.form.city_relation[t.core_keys_id]=r,onKeyup:r=>e.handleCustomFieldError(t),onBlur:r=>e.handleCustomFieldError(t),enableTimePicker:!0,inline:!1,autoApply:!1},null,8,["value","onUpdate:value","onKeyup","onBlur"])]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):v("",!0),t.ui_type_id==="uit00006"&&t.enable===1&&t.is_delete===0?(u(),m("div",qe,[o(y,{class:"text-base"},{default:n(()=>[a(s(e.$t(t.name))+" ",1),k(d("span",Ge,"*",512),[[g,t.mandatory===1]])]),_:2},1024),o(U,{rows:"4",placeholder:e.$t(t.placeholder),value:e.form.city_relation[t.core_keys_id],"onUpdate:value":r=>e.form.city_relation[t.core_keys_id]=r,onKeyup:r=>e.handleCustomFieldError(t),onBlur:r=>e.handleCustomFieldError(t)},null,8,["placeholder","value","onUpdate:value","onKeyup","onBlur"]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):v("",!0),t.ui_type_id==="uit00007"&&t.enable===1&&t.is_delete===0?(u(),m("div",Je,[o(y,{class:"text-base"},{default:n(()=>[a(s(e.$t(t.name))+" ",1),k(d("span",Qe,"*",512),[[g,t.mandatory===1]])]),_:2},1024),o($,{type:"number",class:"w-full rounded",placeholder:e.$t(t.placeholder),value:e.form.city_relation[t.core_keys_id],"onUpdate:value":r=>e.form.city_relation[t.core_keys_id]=r,onKeyup:r=>e.handleCustomFieldError(t),onBlur:r=>e.handleCustomFieldError(t)},null,8,["placeholder","value","onUpdate:value","onKeyup","onBlur"]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):v("",!0),t.ui_type_id==="uit00008"&&t.enable===1&&t.is_delete===0?(u(),m("div",Xe,[o(y,{class:"text-base"},{default:n(()=>[a(s(e.$t(t.name)),1),k(o(y,{class:"text-red-800 font-medium me-1"},{default:n(()=>[Ye]),_:2},1536),[[g,t.mandatory==1]]),a(s(e.$t(t.name)),1)]),_:2},1024),d("div",Ze,[o(M,{oldData:e.form.city_relation[t.core_keys_id],onToParent:e.handleMultiSelect,customizeDetails:e.customizeDetails,customizeHeader:t},null,8,["oldData","onToParent","customizeDetails","customizeHeader"])]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):v("",!0),t.ui_type_id==="uit00009"&&t.enable===1&&t.is_delete===0?(u(),m("div",xe,[o(y,{class:"text-base"},{default:n(()=>[a(s(e.$t(t.name))+" ",1),k(d("span",et,"*",512),[[g,t.mandatory===1]])]),_:2},1024),o(A,{uploadType:"image",imageFile:e.form.city_relation[t.core_keys_id],"onUpdate:imageFile":r=>e.form.city_relation[t.core_keys_id]=r},null,8,["imageFile","onUpdate:imageFile"]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):v("",!0),t.ui_type_id==="uit00010"&&t.enable===1&&t.is_delete===0?(u(),m("div",tt,[o(y,{class:"text-base"},{default:n(()=>[a(s(e.$t(t.name))+" ",1),k(d("span",ot,"*",512),[[g,t.mandatory===1]])]),_:2},1024),k(d("input",{type:"time",class:"w-full rounded","onUpdate:modelValue":r=>e.form.city_relation[t.core_keys_id]=r},null,8,rt),[[x,e.form.city_relation[t.core_keys_id]]]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):v("",!0),t.ui_type_id==="uit00011"&&t.enable===1&&t.is_delete===0?(u(),m("div",nt,[o(y,{class:"text-base"},{default:n(()=>[a(s(e.$t(t.name))+" ",1),k(d("span",lt,"*",512),[[g,t.mandatory===1]])]),_:2},1024),d("div",null,[o(_,{value:e.form.city_relation[t.core_keys_id],"onUpdate:value":r=>e.form.city_relation[t.core_keys_id]=r,onKeyup:r=>e.handleCustomFieldError(t),onBlur:r=>e.handleCustomFieldError(t),inline:!1,autoApply:!1},null,8,["value","onUpdate:value","onKeyup","onBlur"])]),o(b,{textColor:"text-red-500 ",class:"mt-2 block"},{default:n(()=>[a(s(e.city_relation_errors&&e.city_relation_errors[t.core_keys_id]),1)]),_:2},1024)])):v("",!0)]))),128)),d("div",st,[o(K,{onClick:i[12]||(i[12]=t=>e.handleCancel()),textSize:"text-sm ",type:"reset",class:"me-4",colors:"text-primary-500",focus:"",hover:""},{default:n(()=>[a(s(e.$t("core__be_btn_cancel")),1)]),_:1}),o(K,{class:"transition-all duration-300 min-w-3xs",padding:"px-5 py-2",rounded:"rounded",hover:"",focus:""},{default:n(()=>[e.loading?(u(),N(l,{key:0,theme:"border-2 border-t-2 border-text-8 border-t-primary-500",loadingSize:"h-5 w-5"})):v("",!0),e.success?(u(),N(p,{key:1,name:"check",w:"20",h:"20",class:"me-1.5 transition-all duration-300"})):v("",!0),e.success?(u(),m("span",at,s(e.$t("core__be_btn_saved")),1)):v("",!0),!e.loading&&!e.success?(u(),m("span",it,s(e.$t("core__be_btn_save")),1)):v("",!0)]),_:1})])])],32)])])]),_:1})]),_:1})],64)}var Vt=ke(Ce,[["render",dt]]);export{Vt as default};
