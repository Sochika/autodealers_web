import x from"./PsModal2.js";import I from"./PsLabel2.js";import U from"./PsLabelCaption3.js";import E from"./PsLabelTitle2.js";import B from"./PsButton2.js";import D from"./PsSecondaryButton.js";import L from"./PsErrorDialog.js";import N from"./PsSuccessDialog2.js";import V from"./PsLoadingDialog2.js";import z from"./PsInput2.js";import{u as R}from"./UserStore.js";import{P as q}from"./PsValueStore.js";import{b as M}from"./PsApiService2.js";import{d as K,i as l,B as j,r as n,o as F,c as T,b as s,w as a,p,t as i,a as f,F as W,J as u,O as A}from"./app.js";import J from"./PsIcon2.js";import G from"./PsInputWithRightIcon2.js";import{_ as Q}from"./plugin-vue_export-helper.js";import"./vue-neat-modal.js";import"./PsLine.js";import"./User.js";import"./PsObject.js";import"./RatingDetail.js";import"./DefaultPhoto.js";import"./ps_constants.js";import"./PsSepetetedStore.js";import"./UserListParameterHolder.js";import"./ApiStatus.js";class X{constructor(){this.userId="",this.userPassword="",this.confPassword="",this.userOldPassword=""}ChangePasswordParameterHolder(){this.userId="",this.userPassword="",this.confPassword="",this.userOldPassword=""}toMap(){const o={};return o.user_id=this.userId,o.user_password=this.userPassword,o.conf_password=this.confPassword,o.old_password=this.userOldPassword,o}}const Y=K({name:"PasswordUpdateModal",components:{PsModal:x,PsLabel:I,PsButton:B,PsErrorDialog:L,PsLoadingDialog:V,PsInput:z,PsLabelTitle:E,PsSuccessDialog:N,PsSecondaryButton:D,PsIcon:J,PsInputWithRightIcon:G,PsLabelCaption:U},setup(){const o=q().getLoginUserId(),S=l(!0),k=l(!0),C=l(!0),w=l(),t=l(),m=l(),_=l(),c=l(""),P=l(""),y=l(""),d=j(new X),g=R();async function h(){t.value.openModal(),await g.loadUser(o),t.value.closeModal()}async function v(){w.value.toggle(!0),await h()}function r(){w.value.toggle(!1)}async function O(){var H,$;if(d.userPassword.trim()==""){P.value=u("password_update_modal__psw_required_error");return}if(d.confPassword.trim()==""){y.value=u("password_update_modal__confirm_psw_required_error");return}if(d.userOldPassword.trim()==""){c.value=u("password_update_modal__old_psw_required_error");return}if(d.userPassword.trim()!=d.confPassword.trim()){y.value=u("password_update_modal__psws_not_same_error");return}t.value.openModal(),d.userId=($=(H=g.user)==null?void 0:H.data)==null?void 0:$.userId;const b=await g.postChangePassword(d,o);t.value.closeModal(),b.status==M.ERROR?m.value.openModal(u("password_update_modal__error"),b.message,u("password_update_modal__ok"),()=>{}):b.status==M.SUCCESS&&(_.value.openModal(u("password_update_modal__success"),u("password_update_modal__psw_update_success"),u("password_update_modal__continue"),()=>{A.Inertia.get(route("login"))}),w.value.toggle(!1))}return{psmodal:w,openModal:v,submitClicked:O,psloading:t,ps_error_dialog:m,paramHolder:d,ps_success_dialog:_,closeModal:r,isHide:S,isHide1:k,isHide2:C,conf_psw_error:y,old_psw_error:c,new_psw_error:P}}}),Z={class:"flex justify-between w-68 sm:w-80 mx-auto"},ee={class:"flex flex-col w-full mt-5"},oe=f("span",{style:{"font-size":"17px",color:"red"}},"*",-1),se=f("span",{style:{"font-size":"17px",color:"red"}},"*",-1),re=f("span",{style:{"font-size":"17px",color:"red"}},"*",-1),ae={class:"flex mt-8 flex-col w-68 sm:w-80 mx-auto"};function te(e,o,S,k,C,w){const t=n("ps-icon"),m=n("ps-label"),_=n("ps-input-with-right-icon"),c=n("ps-label-caption"),P=n("ps-button"),y=n("ps-feSecondary-button"),d=n("ps-modal"),g=n("ps-loading-dialog"),h=n("ps-error-dialog"),v=n("ps-success-dialog");return F(),T(W,null,[s(d,{ref:"psmodal",theme:"p-2 dark_bg-feAchromatic-50 dark_bg-feSecondary-900 border rounded-xl",maxWidth:"408px",visibleLine:!1,isClickOut:!0,class:"z-50"},{title:a(()=>[s(t,{onClick:o[0]||(o[0]=r=>e.closeModal()),name:"close",class:"text-sm text-feSecondary-400 ms-auto my-auto focus:shadow-none hover_text-purple-500 flex justify-end"}),s(m,{class:"text-center text-xl font-semibold"},{default:a(()=>[p(i(e.$t("password_update_modal__update_password")),1)]),_:1})]),body:a(()=>[f("div",Z,[f("div",ee,[s(m,{class:"mt-5 mb-2 text-sm"},{default:a(()=>[p(i(e.$t("password_update_modal__old_password"))+" ",1),oe]),_:1}),s(_,{onKeypress:o[2]||(o[2]=r=>e.old_psw_error=""),value:e.paramHolder.userOldPassword,"onUpdate:value":o[3]||(o[3]=r=>e.paramHolder.userOldPassword=r),className:"dark_bg-feSecondary-900 w-full text-sm shadow-sm",placeholderColor:" placeholder-feSecondary-800 dark_placeholder-feSecondary-500",type:e.isHide?"password":"text",placeholder:e.$t("password_update_modal__old_password_placeholder")},{icon:a(()=>[s(t,{h:24,w:24,onClick:o[1]||(o[1]=r=>e.isHide=!e.isHide),class:"cursor-pointer",theme:" text-feSecondary-800 dark_text-feSecondary-300",name:e.isHide?"eyeOff":"eye-on"},null,8,["name"])]),_:1},8,["value","type","placeholder"]),s(c,{textColor:"text-feError-500 ",class:"mt-1 block"},{default:a(()=>[p(i(e.old_psw_error),1)]),_:1}),s(m,{class:"mt-5 mb-2 text-sm"},{default:a(()=>[p(i(e.$t("password_update_modal__password"))+" ",1),se]),_:1}),s(_,{className:"dark_bg-feSecondary-900 w-full text-sm shadow-sm",onKeypress:o[5]||(o[5]=r=>e.new_psw_error=""),value:e.paramHolder.userPassword,"onUpdate:value":o[6]||(o[6]=r=>e.paramHolder.userPassword=r),placeholderColor:" placeholder-feSecondary-800 dark_placeholder-feSecondary-500",type:e.isHide1?"password":"text",placeholder:e.$t("password_update_modal__password_placeholder")},{icon:a(()=>[s(t,{h:24,w:24,onClick:o[4]||(o[4]=r=>e.isHide1=!e.isHide1),class:"cursor-pointer",theme:" text-feSecondary-800 dark_text-feSecondary-300",name:e.isHide1?"eyeOff":"eye-on"},null,8,["name"])]),_:1},8,["value","type","placeholder"]),s(c,{textColor:"text-feError-500 ",class:"mt-1 block"},{default:a(()=>[p(i(e.new_psw_error),1)]),_:1}),s(m,{class:"mt-5 mb-2 text-sm"},{default:a(()=>[p(i(e.$t("password_update_modal__confirm_password"))+" ",1),re]),_:1}),s(_,{className:"dark_bg-feSecondary-900 w-full text-sm shadow-sm",onKeypress:o[8]||(o[8]=r=>e.conf_psw_error=""),value:e.paramHolder.confPassword,"onUpdate:value":o[9]||(o[9]=r=>e.paramHolder.confPassword=r),placeholderColor:" placeholder-feSecondary-800 dark_placeholder-feSecondary-500",type:e.isHide2?"password":"text",placeholder:e.$t("password_update_modal__confirm_password_placeholder")},{icon:a(()=>[s(t,{h:24,w:24,onClick:o[7]||(o[7]=r=>e.isHide2=!e.isHide2),class:"cursor-pointer",theme:" text-feSecondary-800 dark_text-feSecondary-300",name:e.isHide2?"eyeOff":"eye-on"},null,8,["name"])]),_:1},8,["value","type","placeholder"]),s(c,{textColor:"text-feError-500 ",class:"mt-1 block"},{default:a(()=>[p(i(e.conf_psw_error),1)]),_:1})])])]),footer:a(()=>[f("div",ae,[s(P,{class:"text-center",onClick:e.submitClicked},{default:a(()=>[p(i(e.$t("password_update_modal__update")),1)]),_:1},8,["onClick"]),s(y,{class:"mt-4 mb-2 text-center",onClick:o[10]||(o[10]=r=>e.closeModal())},{default:a(()=>[p(i(e.$t("password_update_modal__cancel")),1)]),_:1})])]),_:1},512),s(g,{ref:"psloading",isClickOut:!1},null,512),s(h,{ref:"ps_error_dialog"},null,512),s(v,{ref:"ps_success_dialog"},null,512)],64)}var Ee=Q(Y,[["render",te]]);export{Ee as default};
