import{a as P,P as l}from"./PsApiService2.js";import{P as h,a as f,b as g,c as w}from"./Package.js";import{P as I}from"./PsObject.js";import{A as M}from"./ApiStatus.js";import{aC as S,B as m,i as L}from"./app.js";import{m as A}from"./PsSepetetedStore.js";class y extends I{constructor(){super(...arguments),this.id="",this.paymentId="",this.coreKeysId="",this.shopId="",this.payment=new h,this.purchasedCount="",this.paymentInfo=new f,this.paymentAttributes=new g,this.addedDateStr=""}init(t,e,s,r,u,i,d,p,c){return this.id=t,this.paymentId=e,this.coreKeysId=s,this.shopId=r,this.payment=u,this.purchasedCount=i,this.paymentInfo=d,this.paymentAttributes=p,this.addedDateStr=c,this}getPrimaryKey(){return this.id}toMap(t){const e={};return e.id=t.id,e.payment_id=t.paymentId,e.coreKeys_id=t.coreKeysId,e.shop_id=t.shopId,e.payment=new h().toMap(t.payment),e.purchased_count=t.purchasedCount,e.payment_info=new f().toMap(t.paymentInfo),e.payment_attributes=new g().toMap(t.paymentAttributes),e.added_date_str=t.addedDateStr,e}toMapList(t){const e=[];for(let s=0;s<t.length;s++)t[s]!=null&&e.push(this.toMap(t[s]));return e}fromMap(t){return new y().init(t.id,t.payment_id,t.core_keys_id,t.shop_id,new h().fromMap(t.payment),t.purchased_count,new f().fromMap(t.payment_info),new g().fromMap(t.payment_attributes),t.added_date_str)}fromMapList(t){const e=[];for(const s in t)s!=null&&e.push(this.fromMap(s));return e}}const N=A(v=>S(`packageStore/${v}`,()=>{const t=m(new P),e=m(new P),s=m({value:!1});let r=L(30),u=0;const i=m({value:!1});function d(a){var n,o;t!=null&&t.data!=null&&t.data.length>0&&u!=0?(a.data!=null&&a.data.length>0?(((n=a.data)==null?void 0:n.length)<r.value?i.value=!0:i.value=!1,t.data.push(...a.data)):i.value=!0,t.code=a.code,t.status=a.status,t.message=a.message):(((o=a.data)==null?void 0:o.length)<r.value||a.data==null?i.value=!0:i.value=!1,t.data=a.data,t.code=a.code,t.status=a.status,t.message=a.message),t!=null&&t.data!=null&&(u=t.data.length)}async function p(a){u=0,s.value=!0;const n=await l.getPackageList(new w,a);d(n),s.value=!1}async function c(a){s.value=!0;const n=await l.getPackageList(new w,a);d(n),s.value=!1}async function _(a){s.value=!0;const n=await l.getPackageListWithPurchasedCount(new y,a);return t.data=n.data,t.code=n.code,t.status=n.status,t.message=n.message,s.value=!1,t}async function k(a,n){s.value=!0;const o=await l.postPackageBought(new M,a,n.toMap());return s.value=!1,o}return{isNoMoreRecord:i,loading:s,limit:r,offset:u,packageList:t,limitItem:e,resetPackageList:p,loadPackageList:c,postPackageBought:k,packageListWithPurchasedCount:_}}));export{N as u};
