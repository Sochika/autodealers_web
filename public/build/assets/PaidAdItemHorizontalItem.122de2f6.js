import H from"./PsLabel.3935ab2c.js";import B from"./PaidAdItemPaidStatus.d2228e13.js";import q from"./PsCard.27eb6835.js";import G from"./PsIcon.0697a0d8.js";import b from"./PsRouteLink.14f8a093.js";import K from"./PsLoadingDialog.16642bee.js";import{bD as J,y as D,i as T,o as k,c as L,a as n,b as l,w as x,m as O,n as Q,q as y,t as m,f as W,g as M,F as X,z as F,O as Y,r as w,E as Z}from"./app.df1b8390.js";import{f as $}from"./format.min.427d9f09.js";import{P as U}from"./ps_constants.deaae373.js";import{P as j}from"./PsObject.a17ef38f.js";import{P as z}from"./Product.dc190b28.js";import{a as tt,P as N}from"./PsApiService.317e88ef.js";import{m as et}from"./PsSepetetedStore.9a31ac47.js";import{P as R}from"./PsValueStore.08b5513c.js";import{u as at}from"./PsValueHolder.2dad780d.js";import{u as it}from"./AppInfoStore.4b2c5718.js";import{u as st}from"./FavouriteItemStore.6d0ab0b1.js";import{A as dt}from"./AppInfoParameterHolder.e24d894d.js";import{h as ot}from"./moment.9709ab41.js";import{_ as rt}from"./plugin-vue_export-helper.21dcd24c.js";class C extends j{constructor(){super(...arguments),this.id="",this.itemId="",this.startDate="",this.startTimeStamp="",this.endDate="",this.endTimeStamp="",this.amount="",this.paymentMethod="",this.transCode="",this.status="",this.addedDate="",this.addedUserId="",this.updatedDate="",this.updatedUserId="",this.updatedFlag="",this.addedDateStr="",this.paidStatus="",this.item=new z}init(t,e,a,p,s,h,u,f,v,S,i,o,c,r,_,g,P,I){return this.id=t,this.itemId=e,this.startDate=a,this.startTimeStamp=p,this.endTimeStamp=h,this.endDate=s,this.amount=u,this.paymentMethod=f,this.transCode=v,this.status=S,this.addedDate=i,this.addedUserId=o,this.updatedDate=c,this.updatedUserId=r,this.updatedFlag=_,this.addedDateStr=g,this.paidStatus=P,this.item=I,this}getPrimaryKey(){return this.id}toMap(t){const e={};return e.id=t.id,e.item_id=t.itemId,e.start_date=t.startDate,e.start_timestamp=t.startTimeStamp,e.end_timestamp=t.endTimeStamp,e.end_date=t.endDate,e.amount=t.amount,e.payment_method=t.paymentMethod,e.trans_code=t.transCode,e.status=t.status,e.added_date=t.addedDate,e.added_user_id=t.addedUserId,e.updated_date=t.updatedDate,e.updated_user_id=t.updatedUserId,e.updated_flag=t.updatedFlag,e.added_date_str=t.addedDateStr,e.paid_status=t.paidStatus,e.item=new z().toMap(t.item),e}toMapList(t){const e=[];for(let a=0;a<t.length;a++)t[a]!=null&&e.push(this.toMap(t[a]));return e}fromMap(t){return new C().init(t.id,t.item_id,t.start_date,t.start_timestamp,t.end_date,t.end_timestamp,t.amount,t.payment_method,t.trans_code,t.status,t.added_date,t.added_user_id,t.updated_date,t.updated_user_id,t.updated_flag,t.added_date_str,t.paid_status,new z().fromMap(t.item))}fromMapList(t){const e=[];for(const a in t)a!=null&&e.push(this.fromMap(a));return e}}const nt=et(d=>J(`aidAdItemStore/${d}`,()=>{const t=D(new tt),e=D({value:!1});let a=T(4),p=0;const s=D({value:!1});let h="";function u(i){var o,c;t!=null&&t.data!=null&&t.data.length>0&&p!=0?(i.data!=null&&i.data.length>0?(((o=i.data)==null?void 0:o.length)<a.value?s.value=!0:s.value=!1,t.data.push(...i.data)):s.value=!0,t.code=i.code,t.status=i.status,t.message=i.message):(((c=i.data)==null?void 0:c.length)<a.value?s.value=!0:s.value=!1,t.data=i.data,t.code=i.code,t.status=i.status,t.message=i.message),t!=null&&t.data!=null&&(p=t.data.length)}async function f(i){e.value=!0;const o=await N.getPaidAdItemList(new C,i,a.value,p);u(o),e.value=!1}async function v(i){p=0,e.value=!0;const o=await N.getPaidAdItemList(new C,i,a.value,p);u(o),e.value=!1}async function S(i){e.value=!0;const o=0,c=t.data.length,r=await N.getPaidAdItemList(new C,i,c,o);t.data=r.data,t.code=r.code,t.status=r.status,t.message=r.message,e.value=!1}return{isNoMoreRecord:s,paidAdItemList:t,loading:e,limit:a,offset:p,id:h,loadPaidAdItemList:f,resetPaidAdItemList:v,updatePaidAdItemList:u,refleshPaidAdItemList:S}})),mt={name:"PaidAdItemHorizontalItem",components:{PsLabel:H,PsCard:q,PsRouteLink:b,PsIcon:G,PaidAdItemPaidStatus:B,PsLoadingDialog:K},props:{paiditem:{type:C},onClick:Function},setup(){var i,o,c;R.psValueStore=at();const d=nt(),t=R(),e=st(),a=t.getLoginUserId(),p=new dt;p.userId=a;const s=it(),h=T(!1);((c=(o=(i=s==null?void 0:s.appInfo)==null?void 0:i.data)==null?void 0:o.mobileSetting)==null?void 0:c.is_show_owner_info)=="1"&&(h.value=!0);const u=T();function f(r){var _,g,P,I,V;if(r.toString()=="0")return F("item_price__free");if(((g=(_=s.appInfo.data)==null?void 0:_.psAppSetting)==null?void 0:g.SelectedPriceType)==U.PRICE_RANGE){const E=parseFloat(r),A=parseInt(E);return A>5?"$".repeat(5):A<1?"$".repeat(1):"$".repeat(A)}else return $((V=(I=(P=s==null?void 0:s.appInfo)==null?void 0:P.data)==null?void 0:I.mobileSetting)==null?void 0:V.price_format,r)}async function v(r){a&&a!=U.NO_LOGIN_USER?(u.value.openModal(),r.isFavourited=="1"?u.value.message=F("item_detail__removing_item_from_favourite"):u.value.message=F("item_detail__adding_item_to_favourite"),await e.postFavourite(r.id,a),await S(),u.value.closeModal()):Y.get(route("login"))}async function S(){await d.refleshPaidAdItemList(a)}return{itempaidProvider:d,formatPrice:f,psValueStore:t,PsConst:U,appInfoStore:s,favouriteClicked:v,ps_loading_dialog:u,showProfile:h,moment:ot}}},lt={class:"relative"},ut={class:"overflow-hidden lg:h-56 h-36 w-full"},ft={alt:"Placeholder",class:"overflow-hidden transform transition duration-500 hover:scale-110 block object-cover w-screen lg:h-56 h-36",width:"640px",height:"360px"},ct={class:"flex items-center gap-2"},pt={class:"grow ms-1"},_t={class:"float-end"},ht={class:"grow ms-3"},gt={class:"float-end"},xt={class:"grow ms-1"},vt={key:0,class:"pt-1 pb-2 flex flex-row items-center no-underline justify-between text-feAchromatic-900 leading-none px-2 rounded-b-xl lg:rounded-b-2xl"},yt={class:"relative"},St={alt:"Placeholder",class:"rounded-full bg-transparent lg:w-8 lg:h-8 w-6 h-6 flex items-center justify-center object-cover",width:"50px",height:"50px"},Pt={key:0,class:"w-3 h-3 bg-feInfo-500 rounded-full flex justify-center items-center absolute bottom-0 right-0"},It={class:"flex truncate text-xs text-feSecondary-800 dark:text-feSecondary-300"},wt={class:"font-light text-xs text-feSecondary-500 dark:text-feSecondary-500"};function Ct(d,t,e,a,p,s){const h=w("ps-icon"),u=w("paid-ad-item-paid-status"),f=w("ps-label"),v=w("ps-route-link"),S=w("ps-card"),i=w("ps-loading-dialog"),o=Z("lazy");return k(),L(X,null,[n("div",{class:"cursor-pointer sm:w-full md:w-full",onClick:t[1]||(t[1]=c=>e.onClick!=null?e.onClick(e.paiditem):null)},[l(S,{class:"lg:rounded-lg rounded-lg shadow-sm relative z-0",enabledHover:!0},{default:x(()=>{var c,r;return[n("div",{class:"absolute z-10 bg-feAchromatic-50 dark:bg-feSecondary-800 rounded w-10 h-10 flex justify-center items-center right-2 top-2",onClick:t[0]||(t[0]=_=>a.favouriteClicked(e.paiditem.item))},[l(h,{textColor:"text-fePrimary-500 dark:text-feAchromatic-50",name:e.paiditem.item.isFavourited=="1"?"heart":"heart-outline",h:"24",w:"24"},null,8,["name"])]),l(v,{to:{name:"fe_item_detail",query:{item_id:e.paiditem.item.id}}},{default:x(()=>{var _,g;return[n("div",lt,[n("div",ut,[O(n("img",ft,null,512),[[o,{src:d.$page.props.thumb2xUrl+"/"+e.paiditem.item.defaultPhoto.imgPath,loading:d.$page.props.sysImageUrl+"/loading_gif.gif",error:d.$page.props.sysImageUrl+"/default_photo.png"}]])]),l(u,{status:e.paiditem?e.paiditem.paidStatus:""},null,8,["status"])]),n("div",{class:Q([a.showProfile?"pb-0":"pb-2","pt-2 px-2 flex flex-col gap-2"])},[l(f,{textColor:"text-feSecondary-600 dark:text-feSecondary-200 text-sm"},{default:x(()=>[y(m(e.paiditem.item.title),1)]),_:1}),((g=(_=a.appInfoStore.appInfo.data)==null?void 0:_.psAppSetting)==null?void 0:g.SelectedPriceType)!=a.PsConst.NO_PRICE?(k(),W(f,{key:0,textColor:"font-semibold text-fePrimary-500 text-base"},{default:x(()=>{var P,I;return[y(m(e.paiditem&&((I=(P=a.appInfoStore.appInfo.data)==null?void 0:P.psAppSetting)==null?void 0:I.SelectedPriceType)=="NORMAL_PRICE"?e.paiditem.item.itemCurrency.currencySymbol:"")+" "+m(a.formatPrice(e.paiditem?e.paiditem.item.price:"")),1)]}),_:1})):M("",!0),n("div",ct,[l(h,{name:"location",w:"14",h:"14",viewBox:"0 0 14 14"}),l(f,{textColor:"text-feSecondary-600 dark:text-feSecondary-200 text-sm"},{default:x(()=>[y(m(e.paiditem.item.itemLocation.name),1)]),_:1})]),l(f,{textColor:"flex items-center text-feSecondary-600 dark:text-feSecondary-200 text-sm sm:text-xs md:text-sm"},{default:x(()=>[y(m(d.$t("paid_item_horizontal_item__start"))+" ",1),n("span",pt,[y(": "+m(e.paiditem?a.moment(e.paiditem.startDate.split(" ")[0]).format(d.$page.props.dateFormat):"")+" ",1),n("span",_t,m(e.paiditem?e.paiditem.startDate.split(" ")[1]:""),1)])]),_:1}),l(f,{textColor:"flex items-center text-feSecondary-600 dark:text-feSecondary-200 text-sm sm:text-xs md:text-sm"},{default:x(()=>[y(m(d.$t("paid_item_horizontal_item__end"))+" ",1),n("span",ht,[y(": "+m(e.paiditem?a.moment(e.paiditem.endDate.split(" ")[0]).format(d.$page.props.dateFormat):"")+" ",1),n("span",gt,m(e.paiditem?e.paiditem.endDate.split(" ")[1]:""),1)])]),_:1}),l(f,{textColor:"flex items-center text-feSecondary-600 dark:text-feSecondary-200 text-sm sm:text-xs md:text-sm"},{default:x(()=>[y(m(d.$t("paid_item_horizontal_item__total_spending"))+" ",1),n("span",xt,": "+m(e.paiditem?e.paiditem.item.itemCurrency.currencySymbol:"")+" "+m(e.paiditem?e.paiditem.amount:""),1)]),_:1})],2)]}),_:1},8,["to"]),l(v,{to:{name:"fe_other_profile",params:{userId:(r=(c=e.paiditem.item)==null?void 0:c.user)==null?void 0:r.userId}}},{default:x(()=>{var _,g;return[a.showProfile?(k(),L("div",vt,[n("div",yt,[O(n("img",St,null,512),[[o,{src:d.$page.props.thumb1xUrl+"/"+((g=(_=e.paiditem.item)==null?void 0:_.user)==null?void 0:g.userCoverPhoto),loading:d.$page.props.sysImageUrl+"/loading_gif.gif",error:d.$page.props.sysImageUrl+"/default_photo.png"}]]),e.paiditem.item.user.isVerifybluemark=="1"?(k(),L("div",Pt,[l(h,{name:"bluemark",textColor:"text-feSecondary-50",w:"8",h:"8"})])):M("",!0)]),l(f,{class:"ms-2 mt-1 text-sm flex-grow"},{default:x(()=>[n("span",It,m(e.paiditem.item.user.userName.length>12?e.paiditem.item.user.userName.slice(0,12)+" ...":e.paiditem.item.user.userName),1),n("span",wt,m(e.paiditem.item?a.moment(e.paiditem.item.addedDate).format(d.$page.props.dateFormat):""),1)]),_:1})])):M("",!0)]}),_:1},8,["to"])]}),_:1})]),l(i,{ref:"ps_loading_dialog"},null,512)],64)}var kt=rt(mt,[["render",Ct]]),Qt=Object.freeze(Object.defineProperty({__proto__:null,default:kt},Symbol.toStringTag,{value:"Module"}));export{kt as P,Qt as a,nt as u};
