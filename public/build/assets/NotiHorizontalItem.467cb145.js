import M from"./PsLabel.3935ab2c.js";import{N as T,u as H}from"./NotificationStore.987a5d48.js";import R from"./PsIcon.0697a0d8.js";import E from"./PsDropdown.e8bb7988.js";import{P as z}from"./PsValueStore.08b5513c.js";import O from"./PsLoadingDialog.16642bee.js";import{i as U,o as x,c as v,a as n,m as N,b as a,w as f,q as P,t as C,g as b,n as D,O as S,z as I,r as _,E as F}from"./app.df1b8390.js";import{P as u}from"./ps_constants.deaae373.js";import{u as L,U as j}from"./UserUnReadMessageParameterHolder.1742bc34.js";import V from"./PsConfirmDialog2.4cc5e324.js";import{P as B}from"./PsUtils.2215fd6f.js";import q from"./PsLine.40e0def3.js";import{h as G}from"./moment.9709ab41.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";class K{constructor(){this.userId="",this.deviceToken="",this.notiId="",this.notiType=""}NotiActionParameterHolder(){this.userId="",this.deviceToken="",this.notiId="",this.notiType=""}toMap(){const o={};return o.user_id=this.userId,o.device_token=this.deviceToken,o.noti_id=this.notiId,o.noti_type=this.notiType,o}}class Q{constructor(){this.userId="",this.deviceToken=""}NotiParameterHolder(){this.userId="",this.deviceToken=""}toMap(){const o={};return o.user_id=this.userId,o.device_token=this.deviceToken,o}}const W={name:"NotiHorizontalItem",components:{PsLabel:M,PsDropdown:E,PsIcon:R,PsLoadingDialog:O,PsConfirmDialog2:V,PsLine:q},props:{noti:{type:T,default:new T},onClick:Function},setup(){const i=H(),e=z().getLoginUserId(),t=new K,h=new Q,r=U();h.userId=e;const l=L(),d=new j;d.userId=e;const m=U(!1),y=U();async function k(s,p){r.value.openModal(),m.value=!1,t.userId=e,t.deviceToken=localStorage.deviceToken,t.notiId=s,t.notiType=p,await i.markAsRead(t,e),await i.resetNotiList(h),await l.postUserUnreadMessageCount(d),r.value.closeModal()}async function A(s,p){r.value.openModal(),m.value=!1,t.userId=e,t.deviceToken=localStorage.deviceToken,t.notiId=s,t.notiType=p,await i.markAsUnRead(t,e),await i.resetNotiList(h),await l.postUserUnreadMessageCount(d),r.value.closeModal()}async function g(s,p){r.value.openModal(),m.value=!1,t.userId=e,t.deviceToken=localStorage.deviceToken,t.notiId=s,t.notiType=p,await i.deleteNoti(t,e),await i.resetNotiList(h),await l.postUserUnreadMessageCount(d),r.value.closeModal()}async function w(s){s.type==u.PUSH_NOTI?S.get(route("fe_notification_detail"),{notiId:s.id}):(s.type==u.CHAT_MESSAGE||s.type==u.OFFER_RECEIVED||s.type==u.OFFER_ACCEPTED||s.type==u.OFFER_REJECTED)&&(await k(s.id,s.type),r.value.openModal(),S.get(route("fe_chat"),{buyer_user_id:s.buyerUserId,seller_user_id:s.sellerUserId,item_id:s.itemId,chat_flag:s.chatFlag}))}function c(s){y.value.openModal(I("noti_list__delete_title"),I("noti_list__delete_dialog"),I("chat__confirm"),I("chat__cancel"),()=>{g(s.id,s.type)},()=>{B.log("cancel")})}return{notiStore:i,showMenu:m,markAsRead:k,markAsUnRead:A,deleteNoti:g,ps_loading_dialog:r,ps_confirm_dialog:y,clickNoti:w,PsConst:u,deleteConfirm:c,moment:G}}},X={class:"flex flex-row justify-between h-[62px] sm:h-[100px]"},Y={class:"rounded-md bg-feAchromatic-50 dark:bg-feAchromatic-800"},Z={class:"sm:w-[100px] w-[62px] h-[62px] sm:h-[100px]"},$={key:0,alt:"Placeholder",width:"15px",height:"10px",class:"w-[62px] h-[62px] sm:w-full sm:h-full rounded-md"},ee={key:1,alt:"Placeholder",width:"15px",height:"10px",class:"w-[62px] h-[62px] sm:w-full sm:h-full rounded-md"},te={class:"flex flex-col ms-4 my-auto"},oe={class:"flex flex-col w-[62px] sm:w-[120px]"},se={class:"flex justify-end w-full h-1/2"},ie={class:"z-30"},ae={class:"h-1/2 w-full flex justify-end items-end p-1 sm:p-2"};function ne(i,o,e,t,h,r){var w;const l=_("ps-label"),d=_("ps-icon"),m=_("ps-line"),y=_("ps-dropdown"),k=_("ps-loading-dialog"),A=_("ps-confirm-dialog-2"),g=F("lazy");return x(),v("div",{class:D([e.noti.isRead=="0"?e.noti.type==t.PsConst.PUSH_NOTI?"bg-feSecondary-100":"bg-fePrimary-50 dark:bg-fePrimary-50":"bg-feSecondary-50","w-full cursor-pointer h-[62px] sm:h-[100px] dark:bg-feAchromatic-800 rounded"]),onClick:o[5]||(o[5]=c=>e.onClick!=null?e.onClick(e.noti):null)},[n("div",X,[n("div",{class:"flex-grow flex flex-row",onClick:o[0]||(o[0]=c=>t.clickNoti(e.noti))},[n("div",Y,[n("div",Z,[(w=e.noti)!=null&&w.senderCoverPhoto?N((x(),v("img",$,null,512)),[[g,{src:i.$page.props.thumb2xUrl+"/"+e.noti.senderCoverPhoto,loading:i.$page.props.sysImageUrl+"/loading_gif.gif",error:i.$page.props.sysImageUrl+"/default_photo.png"}]]):N((x(),v("img",ee,null,512)),[[g,{src:i.$page.props.thumb2xUrl+"/"+e.noti.defaultPhoto.imgPath,loading:i.$page.props.sysImageUrl+"/loading_gif.gif",error:i.$page.props.sysImageUrl+"/default_photo.png"}]])])]),n("div",te,[a(l,{class:"text-xxs sm:text-sm lg:text-base",textColor:e.noti.isRead=="0"?e.noti.type==t.PsConst.PUSH_NOTI?"text-feAchromatic-500 dark:text-feAchromatic-200":"text-feAchromatic-500":"text-feAchromatic-500 dark:text-feAchromatic-200",innerHTML:e.noti.message.length>75?e.noti.message.slice(0,75)+" ....":e.noti.message},null,8,["textColor","innerHTML"])])]),n("div",oe,[n("div",se,[a(y,{horizontalAlign:"right",h:"h-auto ",class:"",onClick:o[4]||(o[4]=c=>t.showMenu=!t.showMenu)},{select:f(()=>[a(d,{name:"vertical-dot",w:"24",h:"24",textColor:e.noti.isRead=="0"?e.noti.type==t.PsConst.PUSH_NOTI?"text-feAchromatic-500 dark:text-feAchromatic-200":"text-feAchromatic-500":"text-feAchromatic-500 dark:text-feAchromatic-200",class:"mt-2 text-base me-1 cursor-pointer"},null,8,["textColor"])]),list:f(()=>[n("div",ie,[e.noti.isRead=="0"&&e.noti.type!=t.PsConst.PUSH_NOTI?(x(),v("div",{key:0,onClick:o[1]||(o[1]=c=>t.markAsRead(e.noti.id,e.noti.type)),class:"w-56 flex justify-center items-center py-4 px-2 hover:bg-fePrimary-50 dark:hover:bg-feAchromatic-800 cursor-pointer"},[a(d,{name:"checkNoCircle",class:"mt-2"}),a(l,{class:"ms-2"},{default:f(()=>[P(C(i.$t("noti_horizontal_item__mark_as_read")),1)]),_:1})])):b("",!0),e.noti.isRead=="1"?(x(),v("div",{key:1,onClick:o[2]||(o[2]=c=>t.markAsUnRead(e.noti.id,e.noti.type)),class:"w-56 flex justify-center py-4 px-2 hover:bg-fePrimary-50 dark:hover:bg-feAchromatic-800 cursor-pointer items-center"},[a(d,{name:"checkNoCircle",class:"mt-2"}),a(l,{class:"ms-2"},{default:f(()=>[P(C(i.$t("noti_horizontal_item__mark_as_unread")),1)]),_:1})])):b("",!0),a(m,{class:"mx-4"}),n("div",{onClick:o[3]||(o[3]=c=>t.deleteConfirm(e.noti)),class:"w-56 flex justify-center py-4 px-2 hover:bg-fePrimary-50 dark:hover:bg-feAchromatic-800 cursor-pointer items-center"},[a(d,{name:"trash-alt"}),a(l,{class:"ms-2"},{default:f(()=>[P(C(i.$t("noti_horizontal_item__delete_noti")),1)]),_:1})])])]),_:1})]),n("div",ae,[a(l,{class:"text-3xs sm:text-xs truncate",textColor:e.noti.isRead=="0"?e.noti.type==t.PsConst.PUSH_NOTI?"text-feAchromatic-500 dark:text-feAchromatic-200":"text-feAchromatic-500":"text-feAchromatic-500 dark:text-feAchromatic-200"},{default:f(()=>[P(C(t.moment(e.noti.addedDate).format(i.$page.props.dateFormat)),1)]),_:1},8,["textColor"])])])]),a(k,{ref:"ps_loading_dialog"},null,512),a(A,{ref:"ps_confirm_dialog"},null,512)],2)}var re=J(W,[["render",ne]]),we=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}));export{re as N,Q as a,we as b};
