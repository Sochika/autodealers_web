import{d as x,i as w,j as D,B as M,A as $,C as V,o as u,c as f,a as t,h as B,b as a,w as s,q as S,t as L,F as A,s as O,n as P,g as H,D as T,r as c}from"./app.df1b8390.js";import j from"./PsIcon.0697a0d8.js";import z from"./PsDropdown.e8bb7988.js";import F from"./PsDropdownSelect.a0554af8.js";import R from"./PsIconToggle.27dcede3.js";import U from"./PsLabel.3935ab2c.js";import q from"./LocationModal.e33ab72c.js";import{P as E}from"./PsValueStore.08b5513c.js";import{u as G}from"./AppInfoStore.4b2c5718.js";import{u as J}from"./ItemLocationTownshipStore.9af11738.js";import{L as K,u as Q}from"./LocationParameterHolder.5c9d98a1.js";import{A as W}from"./AppInfoParameterHolder.e24d894d.js";import{_ as X}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsModal.11d3d0c2.js";import"./vue-neat-modal.fd4a8f96.js";import"./PsLine.40e0def3.js";import"./PsButton.935d57c3.js";import"./PsInputWithLeftIcon.bd6285ce.js";import"./PsLabelCaption.a3843f8e.js";import"./ps_constants.deaae373.js";import"./PsApiService.317e88ef.js";import"./PsObject.a17ef38f.js";import"./DefaultPhoto.cc755f93.js";import"./ItemLocationTownship.94979fe0.js";import"./PsSepetetedStore.9a31ac47.js";const Y=x({components:{PsIcon:j,PsIconToggle:R,PsDropdown:z,PsLabel:U,PsDropdownSelect:F,LocationModal:q},props:{topOfPage:{type:Boolean,default:!1}},setup(o){const d=T(),v=w(localStorage.activeLanguage),i=E(),p=G(),_=i.getLoginUserId(),m=new K().getDefaultParameterHolder(),n=new W;n.userId=_,p.loadAppInfo(n);const g=Q("navtab-location"),h=J("navtab-township"),b=w(!0),e=w();function l(r){V(r.symbol),d.dispatch("handleActiveLanguage",r.symbol)}function C(){e.value.openModal()}async function y(){var I,N;await g.resetItemLocationList(_,m);let r=(N=(I=p.appInfo.data)==null?void 0:I.psAppSetting)==null?void 0:N.isSubLocation;(localStorage.locationName===""||localStorage.locationName===void 0)&&(localStorage.locationName="All",localStorage.locationId="",localStorage.locationLat="",localStorage.locationLng=""),r=="1"&&(localStorage.subLocationName===""||localStorage.subLocationName===void 0)?(localStorage.subLocationId="",localStorage.subLocationName="All"):r!="1"&&(localStorage.subLocationName!==""||localStorage.subLocationName!==void 0)&&(localStorage.subLocationId="",localStorage.subLocationName=""),i.replaceLocation(localStorage.locationId,localStorage.locationName,localStorage.locationLat,localStorage.locationLng),i.replaceSubLocation(localStorage.subLocationId,localStorage.subLocationName)}function k(){window.location.pathname.includes("item-list")?location.replace(window.location.origin+window.location.pathname+`?item_location_id=${localStorage.locationId}&item_location_township_id=${localStorage.subLocationId}&order_by=added_date&order_type=desc&status=1`):window.location.reload()}return D(()=>{y()}),{handleLanguage:l,activeLanguage:v,dataReady:b,ps_location_modal:e,itemLocationTownshipStore:h,itemLocationStore:g,openLocationModal:C,changeLocation:k,loadLocationData:y,appInfoStore:p,psValueStore:i}},methods:{...M(["toggleDarkMode"])},computed:{...$(["isDarkMode"])}}),Z={class:"xl:w-feLarge lg:w-large w-full flex justify-between mx-4 sm:mx-6 lg:mx-auto"},oo={key:0,class:"flex gap-4"},eo={class:""},ao=["id"],to={class:"rounded-md shadow-xs w-32"},no={class:"pt-2 z-30"},so=["onClick"],io={class:"flex items-center gap-3"},lo=S("Dark");function ro(o,d,v,i,p,_){const m=c("ps-icon"),n=c("ps-label"),g=c("ps-dropdown"),h=c("ps-icon-toggle"),b=c("location-modal");return u(),f(A,null,[t("nav",{class:P(["fixed z-50 w-full h-10 flex items-center bg-feSecondary-900",o.topOfPage?" ":"hidden"])},[t("div",Z,[t("div",{class:"flex items-center cursor-pointer",onClick:d[0]||(d[0]=B((...e)=>o.openLocationModal&&o.openLocationModal(...e),["prevent"]))},[a(m,{name:"locationBig",class:"text-feSecondary-100 me-2"}),a(n,{textColor:"text-feSecondary-200 dark:text-feAchromatic-50",class:"text-sm hidden md:block"},{default:s(()=>{var e,l;return[S(L(o.psValueStore.locationName)+L(((l=(e=o.appInfoStore.appInfo.data)==null?void 0:e.psAppSetting)==null?void 0:l.isSubLocation)=="1"?`,${o.psValueStore.subLocationName}`:""),1)]}),_:1})]),o.dataReady?(u(),f("div",oo,[t("div",eo,[a(g,{align:"left"},{select:s(()=>[a(n,{class:""},{default:s(()=>[t("button",{type:"button",class:"inline-flex items-center content-start justify-between w-full leading-5 font-medium text-sm focus:outline-none transition ease-in-out duration-150 btn-focus text-feAchromatic-50",id:o.$page.props.languages.filter(e=>e.symbol==o.activeLanguage)[0].name,"aria-haspopup":"true","aria-expanded":"true"},[S(L(o.$page.props.languages.filter(e=>e.symbol==o.activeLanguage)[0].name)+" ",1),a(m,{name:"downArrow",textColor:"text-feAchromatic-50",class:"ms-2",w:"24",h:"24"})],8,ao)]),_:1})]),list:s(()=>[t("div",to,[t("div",no,[(u(!0),f(A,null,O(o.$page.props.languages,e=>(u(),f("div",{key:e.id,class:"w-56 flex py-4 px-2 hover:bg-fePrimary-50 dark:hover:bg-fePrimary-900 cursor-pointer items-center",onClick:l=>o.handleLanguage(e)},[a(n,{class:P(["ms-2",e.symbol==o.activeLanguage?" font-bold":""])},{default:s(()=>[S(L(e.name),1)]),_:2},1032,["class"])],8,so))),128))])])]),_:1})]),t("div",io,[a(n,{textColor:"text-feAchromatic-50"},{default:s(()=>[lo]),_:1}),a(h,{toggleOffIcon:"day",selectedValue:o.isDarkMode,onOnChange:o.toggleDarkMode},null,8,["selectedValue","onOnChange"])])])):H("",!0)])],2),a(b,{onChangeLocation:o.changeLocation,ref:"ps_location_modal"},null,8,["onChangeLocation"])],64)}var Bo=X(Y,[["render",ro]]);export{Bo as default};
