import{H as A,i as u,j as L,r as s,o as g,c as U,b as t,a as d,w as l,p as n,t as a,ay as V,f as b,g as C,F as $}from"./app.js";import S from"./PsLabel2.js";import B from"./PsLabelTitle2.js";import H from"./PsLabelCaption3.js";import I from"./PsButton2.js";import T from"./PsInput2.js";import j from"./UserPhoneLoginVerificationModal.js";import q from"./PsErrorDialog2.js";import{P as z}from"./PsValueStore.js";import{u as D}from"./UserProvider.js";import{P as E}from"./PhoneLoginParameterHolder.js";import{_ as F}from"./plugin-vue_export-helper.js";import"./PsModal2.js";import"./vue-neat-modal.js";import"./PsLine.js";import"./PsApiService2.js";import"./User.js";import"./PsObject.js";import"./RatingDetail.js";import"./UserListParameterHolder.js";import"./DefaultPhoto.js";import"./ps_constants.js";import"./UserRegisterParameterHolder.js";import"./ApiStatus.js";const M={name:"PhoneLoginView",components:{PsLabel:S,PsLabelTitle:B,PsButton:I,PsInput:T,UserPhoneLoginVerificationModal:j,PsErrorDialog:q,PsLabelCaption:H,Head:A},setup(){const e=D(),r=new E,o=z().getLoginUserId(),i=u(),y=u(),m=u(!1),c=u(!1),h=u(),v=u();e.loading.value=!0;function p(){e.loading.value=!0,setTimeout(()=>{e.loading.value=!1},1e3)}L(()=>{p()});function P(){}async function k(){let _=!0;if((i.value==""||i.value==null)&&(m.value=!0,_=!1),(i.value==""||i.value==null)&&(c.value=!0,_=!1),!_){window.scrollTo(0,0);return}r.phoneId=o,r.userName=i.value,r.userPhone=y.value,e.loading.value=!0,e.loading.value=!1}function x(_){/^\/$|(\/[a-zA-Z_0-9-]+)+$/.test(_.target.value)?m.value=!0:m.value=!1}function f(_){/^\/$|(\/[a-zA-Z_0-9-]+)+$/.test(_.target.value)?c.value=!0:c.value=!1}return{userProvider:e,clicked:k,name:i,phone:y,user_phone_login_verification_modal:h,ps_error_dialog:v,loginClicked:P,isValidUserName:m,validateName:x,validatePhone:f,isValidPhone:c}}},Z={class:"sm:mt-28 lg:mt-28 mt-28 bg-fePrimary-500 dark_bg-feAccent-500 h-screen flex flex-col"},G={class:"mt-56 w-96 flex flex-col mx-auto bg-feAchromatic-50 dark_bg-feAchromatic-900 m-auto rounded-lg"},J=d("div",{id:"recaptcha-container"},null,-1),O=n(),Q=d("br",null,null,-1),R={class:"flex items-center justify-center mb-4"},W={class:"flex flex-auto justify-center mt-4 mb-10"};function X(e,r,K,o,i,y){const m=s("Head"),c=s("ps-label-title"),h=s("ps-label"),v=s("ps-input"),p=s("ps-label-caption"),P=s("ps-button"),k=s("user-phone-login-verification-modal"),x=s("ps-error-dialog");return g(),U($,null,[t(m,{title:e.$t("phone_login__phone_login")},null,8,["title"]),d("div",Z,[d("div",G,[t(c,{class:"mt-8 mx-auto text-2xl"},{default:l(()=>[n(a(e.$t("phone_login__phone_login")),1)]),_:1}),t(h,{class:"mt-4 mx-8"},{default:l(()=>[n(a(e.$t("phone_login__user_name"))+" : ",1)]),_:1}),t(v,{class:"mt-2 mx-8",type:"text",placeholder:e.$t("phone_login__user_name"),onKeyup:V(o.clicked,["enter"]),onKeypress:o.validateName,value:o.name,"onUpdate:value":r[0]||(r[0]=f=>o.name=f)},null,8,["placeholder","onKeyup","onKeypress","value"]),o.isValidUserName?(g(),b(p,{key:0,class:"mt-2 mx-8",textColor:"text-fePrimary-500 dark_text-feAccent-500"},{default:l(()=>[n(a(e.$t("phone_login__user_name_required")),1)]),_:1})):C("",!0),t(p,{class:"mt-2 mx-8"},{default:l(()=>[n(a(e.$t("phone_login__user_name_format")),1)]),_:1}),t(h,{class:"mt-4 mx-8"},{default:l(()=>[n(a(e.$t("phone_login__phone_number"))+" : ",1)]),_:1}),t(v,{class:"mt-2 mx-8",type:"text",placeholder:e.$t("phone_login__phone_number_placeholder"),onKeyup:V(o.clicked,["enter"]),onKeypress:o.validatePhone,value:o.phone,"onUpdate:value":r[1]||(r[1]=f=>o.phone=f)},null,8,["placeholder","onKeyup","onKeypress","value"]),o.isValidPhone?(g(),b(p,{key:1,class:"mt-2 mx-8",textColor:"text-fePrimary-500 dark_text-feAccent-500"},{default:l(()=>[n(a(e.$t("phone_login__phone_required")),1)]),_:1})):C("",!0),J,O,Q,d("div",R,[o.userProvider.loading.value?(g(),b(P,{key:0,class:"mt-6 mx-8",disabled:!0},{default:l(()=>[n(a(e.$t("phone_login__loading")),1)]),_:1})):(g(),b(P,{key:1,class:"mt-6 mx-8",onClick:o.clicked,disabled:!1},{default:l(()=>[n(a(e.$t("phone_login__login")),1)]),_:1},8,["onClick"]))]),d("div",W,[t(p,{class:"cursor-pointer",onClick:o.loginClicked},{default:l(()=>[n(a(e.$t("phone_login__back_to_login")),1)]),_:1},8,["onClick"])])])]),t(k,{ref:"user_phone_login_verification_modal"},null,512),t(x,{ref:"ps_error_dialog"},null,512)],64)}var xe=F(M,[["render",X]]);export{xe as default};
