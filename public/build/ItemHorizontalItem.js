import O from"./PsLabel2.js";import B from"./PsLabelTitle4.js";import E from"./PsCard2.js";import q from"./PsIcon2.js";import{P as L}from"./ps_constants.js";import G from"./PsAdSense.js";import M from"./PsLoadingDialog3.js";import{f as R}from"./format.min.js";import J from"./PsRouteLink.js";import{i as D,r as p,Q,o,c as n,a as m,f as S,w as a,n as H,b as i,m as T,g as d,p as c,t as s,F as W,J as A,O as K,a4 as X,a5 as Y}from"./app.js";import{P as U}from"./PsValueStore.js";import{P as Z}from"./Product.js";import{u as $}from"./PsValueHolder.js";import{u as ee}from"./AppInfoStore.js";import{u as te}from"./ProductStore.js";import{u as V}from"./FavouriteItemStore.js";import{u as oe,F as ie}from"./FollowItemParameterHolder.js";import{A as ae}from"./AppInfoParameterHolder.js";import{h as se}from"./moment.js";import{_ as re}from"./plugin-vue_export-helper.js";import"./PsApiService2.js";import"./PsObject.js";import"./DefaultPhoto.js";import"./PsModal2.js";import"./vue-neat-modal.js";import"./PsLine.js";import"./PsLabelTitle2.js";import"./Category.js";import"./DefaultIcon.js";import"./SubCategory.js";import"./ItemLocationTownship.js";import"./User.js";import"./RatingDetail.js";import"./ProductParameterHolder.js";import"./ApiStatus.js";import"./PsSepetetedStore.js";import"./PsUtils.js";const le={name:"ItemHorizontalItem",components:{PsLabel:O,PsLabelTitle4:B,PsCard:E,PsIcon:q,PsAdSense:G,PsRouteLink:J,PsLoadingDialog:M},props:{item:{type:Z},notShowTitle:{type:Boolean,default:!1},onClick:Function,storeName:{type:String,default:""}},setup(t){var v,y,b;const _=D();U.psValueStore=$();const e=te(t.storeName),r=V(),z=V("favourite"),F=oe(),g=U(),f=g.getLoginUserId(),l=new ae,w=new ie;l.userId=f;const x=ee(),P=D(!1);((b=(y=(v=x==null?void 0:x.appInfo)==null?void 0:v.data)==null?void 0:y.mobileSetting)==null?void 0:b.is_show_owner_info)=="1"&&(P.value=!0);function k(u){var h,j,N;return u.toString()=="0"?A("item_price__free"):R((N=(j=(h=x==null?void 0:x.appInfo)==null?void 0:h.data)==null?void 0:j.mobileSetting)==null?void 0:N.price_format,u)}async function C(u){f&&f!=L.NO_LOGIN_USER?(_.value.openModal(),t.item.isFavourited=="1"?_.value.message=A("item_detail__removing_item_from_favourite"):_.value.message=A("item_detail__adding_item_to_favourite"),await r.postFavourite(u,f),await I(),_.value.closeModal()):K.Inertia.get(route("login"))}async function I(){t.storeName==""?await F.refleshFollowerItemList(f,w):t.storeName=="favourite"?await z.refleshFavouriteItemList(f):await e.refleshProductList(f,e.paramHolder)}return{appInfoStore:x,formatPrice:k,PsConst:L,psValueStore:g,favouriteClicked:C,ps_loading_dialog:_,showProfile:P,moment:se}}},ne=t=>(X("data-v-4bd04233"),t=t(),Y(),t),me={class:"h-44 relative z-0"},de={class:"absolute z-10"},ce={class:"overflow-hidden h-44 w-full"},fe={alt:"Placeholder",class:"transform transition duration-500 hover:scale-110 rounded-t-lg object-cover w-screen h-44",width:"640px",height:"360px"},ue={key:1,class:"absolute bg-feWarning-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},_e={key:2},xe={key:0,class:"absolute bg-fePrimary-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},he={key:0,class:"absolute bg-feSuccess-500 rounded px-2 py-1 left-0 top-8"},ge={key:1,class:"absolute bg-feSuccess-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},ye={key:3,class:"absolute bg-feSecondary-300 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},pe={key:4,class:"absolute bg-feError-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},ve={class:"absolute left-2 bottom-2 z-20"},be=ne(()=>m("div",{class:"relative lg:pt-48 pt-28"},null,-1)),Se={key:0,class:"ps-1 pt-1"},we={key:1,class:"ps-1 flex flex-row items-center justify-start"},Pe={key:2,class:"ps-1"},ke={class:"flex items-center rtl:space-x-reverse space-x-2.5"},Ce={key:0,class:"pt-1 pb-2 flex items-center justify-between leading-none px-2 rounded-b-xl lg:rounded-b-2xl"},Ie={class:"flex flex-row items-center no-underline text-feAchromatic-900"},Ae={class:"relative"},ze={alt:"Placeholder",class:"rounded-full bg-transparent lg:w-8 lg:h-8 w-6 h-6 flex items-center justify-center object-cover",width:"50px",height:"50px"},Fe={key:0,class:"w-3 h-3 bg-feInfo-500 rounded-full flex justify-center items-center absolute bottom-0 right-0"},je={class:"ms-2 mt-1 text-sm flex-grow"},Ne={class:"flex"},Le={class:"w-full lg:h-72 h-52 mx-auto lg:mt-12 lg:mb-12 mt-8 mb-6"};function De(t,_,e,r,z,F){var C,I,v;const g=p("ps-route-link"),f=p("ps-icon"),l=p("ps-label"),w=p("ps-card"),x=p("ps-ad-sense"),P=p("ps-loading-dialog"),k=Q("lazy");return o(),n(W,null,[m("div",{class:"cursor-pointer w-full h-full pb-3",onClick:_[1]||(_[1]=y=>e.onClick!=null?e.onClick(e.item):null)},[((C=e.item)==null?void 0:C.adType)==r.PsConst.NORMAL_AD||((I=e.item)==null?void 0:I.adType)==r.PsConst.PAID_AD?(o(),S(w,{key:0,class:"flex w-full bg-feAchromatic-50 flex-col lg:rounded-lg shadow-sm",enabledHover:!0},{default:a(()=>{var y,b;return[m("div",{class:H(["lg:px-0 lg:py-0 px-1",r.showProfile?"rounded-b-xl lg:rounded-b-2xl":"rounded-xl lg:rounded-2xl"])},[m("div",me,[m("div",de,[i(g,{to:{name:"fe_item_detail",query:{item_id:e.item.id}}},{default:a(()=>[m("div",ce,[T(m("img",fe,null,512),[[k,{src:t.$page.props.thumb2xUrl+"/"+e.item.defaultPhoto.imgPath,loading:t.$page.props.sysImageUrl+"/loading_gif.gif",error:t.$page.props.sysImageUrl+"/default_photo.png"}]])])]),_:1},8,["to"])]),e.notShowTitle?d("",!0):(o(),n("div",{key:0,class:"absolute z-20 bg-feAchromatic-50 dark_bg-feSecondary-800 rounded w-10 h-10 flex justify-center items-center right-2 top-2",onClick:_[0]||(_[0]=u=>r.favouriteClicked(e.item.id))},[e.item.isFavourited=="1"?(o(),S(f,{key:0,textColor:"text-fePrimary-500 dark_text-feAchromatic-50",class:"",name:"heart",h:"24",w:"24"})):(o(),S(f,{key:1,textColor:"text-fePrimary-500 dark_text-feAchromatic-50",class:"",name:"heart-outline",h:"24",w:"24"}))])),e.item.status=="0"?(o(),n("div",ue,[i(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[c(s(t.$t("core_fe__pending")),1)]),_:1})])):d("",!0),e.item.status=="1"?(o(),n("div",_e,[e.item.isDiscount=="1"?(o(),n("div",xe,[i(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[c(s(e.item.percent)+s(t.$t("item_horizontal_item__discount")),1)]),_:1}),e.item.isPaid=="1"&&e.item.paidStatus==r.PsConst.paidItemProgressStatus?(o(),n("div",he,[i(l,{class:"text-xs lg:text-sm font-medium text-center",textColor:"text-feAchromatic-50 "},{default:a(()=>[c(s(t.$t("item_horizontal_item__featured")),1)]),_:1})])):d("",!0)])):e.item.isPaid=="1"&&e.item.paidStatus==r.PsConst.paidItemProgressStatus?(o(),n("div",ge,[i(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[c(s(t.$t("item_horizontal_item__featured")),1)]),_:1})])):d("",!0)])):d("",!0),e.item.status=="2"?(o(),n("div",ye,[i(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feSecondary-500 "},{default:a(()=>[c(s(t.$t("core_fe__disabled")),1)]),_:1})])):d("",!0),e.item.status=="3"?(o(),n("div",pe,[i(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[c(s(t.$t("core_fe__rejected")),1)]),_:1})])):d("",!0),m("div",ve,[e.item&&e.item.isSoldOut=="1"?(o(),S(l,{key:0,class:"py-1 px-2 text-sm rounded bg-fePrimary-500 font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[c(s(t.$t("item_horizontal_item__sold_out")),1)]),_:1})):d("",!0)]),be]),i(g,{to:{name:"fe_item_detail",query:{item_id:e.item.id}}},{default:a(()=>{var u,h;return[e.notShowTitle?d("",!0):(o(),n("div",Se,[i(l,{class:"truncate-2-lines mb-0.5 font-normal text-sm",textColor:"text-feSecondary-600 dark_text-feSecondary-200"},{default:a(()=>[c(s(e.item?e.item.title:""),1)]),_:1})])),e.item.isDiscount=="1"&&((h=(u=r.appInfoStore.appInfo.data)==null?void 0:u.mobileSetting)==null?void 0:h.is_show_discount)=="1"&&!e.notShowTitle?(o(),n("div",we,[i(l,{class:"line-through me-2 font-semibold text-xs",textColor:"text-feSecondary-500 "},{default:a(()=>[c(s(e.item?e.item.itemCurrency.currencySymbol:"")+" "+s(r.formatPrice(e.item?e.item.originalPrice:"")),1)]),_:1}),i(l,{class:"font-semibold text-xs lg:text-base",textColor:"text-fePrimary-500 "},{default:a(()=>[c(s(e.item?e.item.itemCurrency.currencySymbol:"")+" "+s(r.formatPrice(e.item?e.item.price:"")),1)]),_:1})])):(o(),n("div",Pe,[i(l,{class:"font-semibold text-base",textColor:"text-fePrimary-500 "},{default:a(()=>[c(s(e.item?e.item.itemCurrency.currencySymbol:"")+" "+s(r.formatPrice(e.item?e.item.originalPrice:"")),1)]),_:1})])),e.notShowTitle?d("",!0):(o(),n("div",{key:3,class:H([r.showProfile?"pb-0":"pb-2","ps-1 flex justify-between"])},[m("div",ke,[i(f,{textColor:"text-feSecondary-400 dark_text-feAchromatic-500",name:"location-marker",h:"14",w:"14",class:"text-feSecondary-400 me-1",viewBox:"0 0 14 14"}),i(l,{class:"truncate font-normal text-sm",textColor:"text-feSecondary-400 dark_text-feSecondary-200"},{default:a(()=>[c(s(e.item?e.item.itemLocation.name:""),1)]),_:1})])],2))]}),_:1},8,["to"])],2),i(g,{to:{name:"fe_other_profile",params:{userId:(b=(y=e.item)==null?void 0:y.user)==null?void 0:b.userId}}},{default:a(()=>{var u,h;return[r.showProfile?(o(),n("div",Ce,[m("div",Ie,[m("div",Ae,[T(m("img",ze,null,512),[[k,{src:t.$page.props.thumb1xUrl+"/"+((h=(u=e.item)==null?void 0:u.user)==null?void 0:h.userCoverPhoto),loading:t.$page.props.sysImageUrl+"/loading_gif.gif",error:t.$page.props.sysImageUrl+"/default_photo.png"}]]),e.item.user.isVerifybluemark=="1"?(o(),n("div",Fe,[i(f,{name:"bluemark",textColor:"text-feSecondary-50",w:"8",h:"8"})])):d("",!0)]),m("p",je,[m("span",Ne,[i(l,{class:"truncate text-xs",textColor:"text-feSecondary-800 dark_text-feSecondary-300"},{default:a(()=>[c(s(e.item.user.userName.length>12?e.item.user.userName.slice(0,12)+" ...":e.item.user.userName),1)]),_:1})]),i(l,{class:"font-light text-xs",textColor:"text-feSecondary-500 dark_text-feSecondary-500"},{default:a(()=>[c(s(e.item?r.moment(e.item.addedDate).format(t.$page.props.dateFormat):""),1)]),_:1})])])])):d("",!0)]}),_:1},8,["to"])]}),_:1})):d("",!0),((v=e.item)==null?void 0:v.adType)==r.PsConst.GOOGLE_AD?(o(),S(w,{key:1,class:"flex w-full flex-col"},{default:a(()=>[m("div",Le,[i(x,{adFormat:"square",adStyle:"display:inline-block; width: 160px; height: 160px;",adStyleSm:"display:inline-block; width: 160px; height: 160px;",adStyleLg:"display:inline-block; width: 160px; height: 160px;"})])]),_:1})):d("",!0)]),i(P,{ref:"ps_loading_dialog"},null,512)],64)}var yt=re(le,[["render",De],["__scopeId","data-v-4bd04233"]]);export{yt as default};
