import{e as pe,g as _e,P as be,a as fe,d as he}from"./PsLayout.js";import{d as ge,H as ve,i as o,J as n,D as K,O as M,r as v,o as d,c as b,b as i,w as r,a as c,p as u,t as m,f as F,g,F as j,q as L,n as T}from"./app.js";import{P as ye}from"./PsButton.js";import{P as ke}from"./PsBannerIcon.js";import{P as Oe}from"./PsBreadcrumb2.js";import{P as Ce}from"./PsIcon.js";import{D as we}from"./PsTableSearch.js";import{P as Se}from"./PsIconButton.js";import{P as De}from"./PsLabel.js";import{P as $e}from"./PsLink1.js";import{P as Pe}from"./PsToggle.js";import{P as Fe}from"./PsTable2.js";import{D as Ie}from"./DatePicker.js";import{P as Ae}from"./PsBadge.js";import{_ as je}from"./plugin-vue_export-helper.js";import{a as Te,b as Ve,h as He,i as Be}from"./psApiService.js";import{P as Ue}from"./PsInputWithRightIcon.js";import"./PsModal.js";import"./vue-neat-modal.js";import"./index.esm.js";import"./auth.esm.js";import"./PsSuccessDialog.js";import"./PsLoading.js";import"./PsInput.js";import"./PsLabelCaption.js";import"./PsLoadingCircleDialog.js";import"./PsIcon1.js";import"./Icons.js";import"./toggle.js";import"./moment.js";const Re=ge({name:"Index",components:{Head:ve,PsButton:ye,PsTextButton:pe,PsBannerIcon:ke,PsBreadcrumb2:Oe,PsDangerDialog:_e,PsIcon:Ce,PsDropdown:be,PsDropdownSelect:fe,Dropdown:we,PsIconButton:Se,PsLabel:De,PsLink1:$e,PsToggle:Pe,PsTable2:Fe,DatePicker:Ie,PsBadge:Ae,PsInputWithRightIcon:Ue},layout:he,props:{status:Object,items:Object,categories:Object,subcategories:Object,customizeHeaders:Object,customizeDetails:Object,hideShowFieldForFilterArr:Object,showCoreAndCustomFieldArr:Object,selectedCategory:{type:String,default:""},selectedSubcategory:{type:String,default:""},selectedDealOption:{type:String,default:""},selectedPurchaseOption:{type:String,default:""},selectedDate:{type:String,default:""},authUser:Object,uis:Object,sort_field:{type:String,default:""},sort_order:{type:String,default:"desc"},search:String,itmPurchasedOption:String,itmDealOption:String,itmConditionOfItem:String,itmItemType:String,isSubCategoryOn:String},setup(e){let s=o(!1);const V=o(!0),q=e.selectedCategory||e.selectedSubcategory||e.selectedDealOption||e.selectedPurchaseOption||e.selectedDate?o(!0):o(!1),J=o(!1);let H=e.search?o(e.search):o(""),B=e.sort_field?o(e.sort_field):o(""),U=e.sort_order?o(e.sort_order):o("desc"),h=e.selectedCategory?o(e.selectedCategory.id):o(""),w=e.selectedSubcategory?o(e.selectedSubcategory.id):o(""),P=e.selectedDealOption?o(e.selectedDealOption.id):o(""),O=e.selectedPurchaseOption?o(e.selectedPurchaseOption.id):o(""),p=e.selectedDate?o(e.selectedDate):o(""),S=o([]),D=o(!1),I=o(),f=o(!1),$=o([]),A=o(!1),t=o(),C=o([]),R=o(!1),Q=o(),z=o([]),E=o(!1),X=o();const Y=o();let N=[];e.isSubCategoryOn=="1"?N=[{label:n("core__be_items"),field:"title",type:"String",action:"Action"},{label:n("core__be_item_categories"),field:"category_id@@name",type:"Integer",action:"Action"},{label:n("core__be_item_subcategories"),field:"subcategory_id@@name",type:"Integer",action:"Action"},{label:n("core__be_item_price"),field:"price",type:"Integer",action:"Action"},{label:n("core__be_purchased_option"),field:e.itmPurchasedOption+"@@name",type:"String"},{label:n("core__be_item_condition"),field:e.itmConditionOfItem+"@@name",type:"String"},{label:n("core__be_item_type"),field:e.itmItemType+"@@name",type:"String"},{label:n("core__be_deal_option"),field:e.itmDealOption+"@@name",type:"String",action:"Action"},{label:n("core__be_engagement"),field:"item_touch_count",type:"Integer",action:"Action"},{label:n("core__be_date"),field:"added_date",type:"Timestamp",action:"Action"},{label:n("core__be_detail_label"),field:"detail",type:"Action",sort:!1}]:N=[{label:n("core__be_items"),field:"title",type:"String",action:"Action"},{label:n("core__be_item_categories"),field:"category_id@@name",type:"Integer",action:"Action"},{label:n("core__be_item_price"),field:"price",type:"Integer",action:"Action"},{label:n("core__be_purchased_option"),field:e.itmPurchasedOption+"@@name",type:"String"},{label:n("core__be_item_condition"),field:e.itmConditionOfItem+"@@name",type:"String"},{label:n("core__be_item_type"),field:e.itmItemType+"@@name",type:"String"},{label:n("core__be_deal_option"),field:e.itmDealOption+"@@name",type:"String",action:"Action"},{label:n("core__be_engagement"),field:"item_touch_count",type:"Integer",action:"Action"},{label:n("core__be_date"),field:"added_date",type:"Timestamp",action:"Action"},{label:n("core__be_detail_label"),field:"detail",type:"Action",sort:!1}];function Z(a){B.value=a.field,U.value=a.sort_order,k()}function x(){h.value="all",w.value="all",P.value="all",O.value="all",p.value="",H="",k(),V.value=!1,setTimeout(()=>{V.value=!0},100)}function ee(a){h.value=a,w.value="all";let l=1;$.value=[],k(l)}function te(a){w.value=a,k(1)}function le(a){P.value=a,k(1)}function re(a){O.value=a,k(1)}function ae(a){p.value=a,k(1)}function oe(a){H.value=a,k(1)}function ie(a){k(1,a)}function k(a=null,l=null){M.Inertia.get(route("item_report.index"),{sort_field:B.value,sort_order:U.value,page:a!=null?a:e.items.meta.current_page,row:l!=null?l:e.items.meta.per_page,search:H.value,category_filter:h.value,sub_category_filter:w.value,deal_option_filter:P.value,purchase_option_filter:O.value,date_filter:p.value},{preserveScroll:!0,preserveState:!0})}function W(a){D.value=!0,f.value=!0,Te(a,I.value,e.authUser.id).then(l=>{l.data.length?l.data.forEach(y=>{S.value.push(y)}):D.value=!1,f.value=!1})}function se(a=null){let l=S.value?S.value.length:0;(l==0||a==!0)&&W(l)}K(I,_.debounce((a,l)=>{let y=0;S.value=[],W(y)},500));function G(a){A.value=!0,f.value=!0,Ve(a,t.value,e.authUser.id,h.value).then(l=>{l.data.length?l.data.forEach(y=>{$.value.push(y)}):A.value=!1,f.value=!1})}function ne(a=null){let l=$.value?$.value.length:0;(l==0||a==!0)&&G(l)}K(t,_.debounce((a,l)=>{let y=0;$.value=[],G(y)},500));function de(a){R.value=!0,f.value=!0,He(a,e.authUser.id).then(l=>{l.data.length?l.data.forEach(y=>{C.value.push(y)}):R.value=!1,f.value=!1}).catch(function(l){l&&(f.value=!1,R.value=!1)})}function ce(a=null){let l=C.value?C.value.length:0;(l==0||a==!0)&&de(l)}function ue(a){E.value=!0,f.value=!0,Be(a,e.authUser.id).then(l=>{l.data.length?l.data.forEach(y=>{z.value.push(y)}):E.value=!1,f.value=!1}).catch(function(l){l&&(f.value=!1,E.value=!1)})}function me(a=null){let l=z.value?z.value.length:0;(l==0||a==!0)&&ue(l)}return{reRenderDate:V,showFilter:q,clearFilter:J,columns:N,colFilterOptions:Y,visible:s,handleSorting:Z,handleSearchingSorting:k,handleCategoryfilter:ee,handleSubcategoryfilter:te,handleDealOptionFilter:le,handlePurchaseOptionFilter:re,handleDateFilter:ae,handleClearFilter:x,handleRow:ie,handleSearching:oe,selected_cat:h,selected_sub_cat:w,selected_deal_option:P,selected_purchase_option:O,selected_date:p,subCategoryDropdownClick:ne,subCategories:$,subCategory_loadmore_visible:A,subCatSearch:t,is_loading:f,dropdownClick:se,categories:S,category_loadmore_visible:D,catSearch:I,purchaseOptions:C,purchaseOptions_loadmore_visible:R,purchaseOptionsSearch:Q,purchaseOptionDropdownClick:ce,dealOptions:z,dealOptions_loadmore_visible:E,dealOptionsSearch:X,dealOptionDropdownClick:me}},created(){},methods:{handleDetail(e){this.$inertia.get(route("item_report.show",e))},FilterOptionshandle(e){M.Inertia.put(route("item_report.screenDisplayUiSetting.store"),{value:e,sort_field:this.sort_field,sort_order:this.sort_order,row:this.items.per_page,search:this.search.value,current_page:this.items.current_page},{preserveScroll:!0,preserveState:!0})}},computed:{breadcrumb(){return[{label:n("core__be_dashboard_label"),url:route("admin.index")},{label:n("item_report_module"),color:"text-primary-500"}]}}}),ze=["href"],Ee={class:"rounded-md shadow-xs w-56"},Le={class:"pt-2 z-30"},Ne=["onClick"],qe={class:"flex flex-row items-center justify-between"},Je={class:"mt-1 mx-1"},We={class:"rounded-md shadow-xs w-56"},Ge={class:"pt-2 z-30"},Ke=["onClick"],Me={class:"flex flex-row items-center justify-between"},Qe={class:"mt-1 mx-1"},Xe={class:"rounded-md shadow-xs w-56"},Ye={class:"pt-2 z-30"},Ze=["onClick"],xe={class:"flex flex-row items-center justify-between"},et={class:"rounded-md shadow-xs w-56"},tt={class:"pt-2 z-30"},lt=["onClick"],rt={class:"flex flex-row items-center justify-between"},at={key:0},ot={key:1},it={key:2},st={key:3,class:"flex flex-row"};function nt(e,s,V,q,J,H){const B=v("Head"),U=v("ps-breadcrumb-2"),h=v("ps-icon"),w=v("ps-text-button"),P=v("ps-icon-button"),O=v("ps-dropdown-select"),p=v("ps-label"),S=v("ps-input-with-right-icon"),D=v("ps-dropdown"),I=v("date-picker"),f=v("ps-badge"),$=v("ps-table2"),A=v("ps-layout");return d(),b(j,null,[i(B,{title:e.$t("item_report_module")},null,8,["title"]),i(A,null,{default:r(()=>[i(U,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),i($,{":row":e.row,search:e.search,object:this.items,colFilterOptions:e.colFilterOptions,columns:e.columns,sort_field:e.sort_field,sort_order:e.sort_order,globalSearchPlaceholder:e.$t("core__be_search"),onFilterOptionshandle:e.FilterOptionshandle,onHandleSort:e.handleSorting,onHandleSearch:e.handleSearching,onHandleRow:e.handleRow,searchable:e.showFilter,eye_filter:!1},{searchLeft:r(()=>[c("a",{href:e.route("item_report.csv.export"),class:"font-medium transition duration-150 ease-in-out px-2 py-1.75 ms-1 rounded text-primary-500 border border-primary-500 hover:outline-none hover:ring hover:ring-blue-100 focus:outline-none focus:ring focus:ring-blue-300 opacity-100 flex items-center"},[i(h,{name:"fileUpload",class:"mx-0.5 font-semibold"}),u(m(e.$t("core__be_export_btn")),1)],8,ze)]),searchRight:r(()=>[e.showFilter?(d(),F(w,{key:0,onClick:s[0]||(s[0]=t=>e.handleClearFilter()),class:"flex text-sm items-center text-red-400 dark:text-red-400",padding:"py-1 px-4"},{default:r(()=>[i(h,{theme:"dark:text-red-400",name:"cross",class:"me-3"}),u(" "+m(e.$t("core__be_clear_filter")),1)]),_:1})):g("",!0),i(P,{colors:e.showFilter?"bg-primary-500 text-white dark:text-secondary-800":"",focus:"",padding:"py-1 px-4",hover:"hover:bg-primary-500 hover:text-white",border:e.showFilter?"border border-primary-500":" border border-secondary-200",leftIcon:"filter",onClick:s[1]||(s[1]=t=>e.showFilter=!e.showFilter)},{default:r(()=>[u(m(e.$t("core__be_filter")),1)]),_:1},8,["colors","border"])]),Filter:r(()=>[i(D,{onOnClick:e.dropdownClick,align:"",class:"h-10"},{select:r(()=>[i(O,{placeholder:e.$t("core__be_category"),border:e.selected_cat!==""&&e.selected_cat!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_cat==""||e.selected_cat=="all"?"":e.selectedCategory.name},null,8,["placeholder","border","selectedValue"])]),list:r(()=>[c("div",Ee,[c("div",Le,[c("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:s[2]||(s[2]=t=>e.handleCategoryfilter("all"))},[i(p,{class:"text-gray-200 ms-2"},{default:r(()=>[u(m(e.$t("core__be_select_all")),1)]),_:1})]),(d(!0),b(j,null,L(e.categories,t=>(d(),b("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:C=>e.handleCategoryfilter(t.id)},[i(p,{class:T(["ms-2",t.id==e.selected_cat?" font-bold":""])},{default:r(()=>[u(m(t.name),1)]),_:2},1032,["class"])],8,Ne))),128))])])]),loadmore:r(()=>[e.category_loadmore_visible?(d(),b("div",{key:0,onClick:s[3]||(s[3]=t=>e.dropdownClick(!0)),class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[c("div",qe,[i(p,{class:"ms-2"},{default:r(()=>[u(m(e.is_loading?e.$t("core__be_loading"):e.$t("core__be_load_more")),1)]),_:1}),i(h,{theme:"text-black dark:text-primary-900",name:"load",w:"16",h:"16"})])])):g("",!0)]),filter:r(()=>[c("div",Je,[i(S,{class:"w-full h-10",theme:"bg-gray-100",rounded:"rounded-lg",value:e.catSearch,"onUpdate:value":s[4]||(s[4]=t=>e.catSearch=t),placeholder:e.$t("core__be_search")},{icon:r(()=>[i(h,{name:"search",class:"cursor-pointer"})]),_:1},8,["value","placeholder"])])]),_:1},8,["onOnClick"]),e.$page.props.isSubCategoryOn=="1"?(d(),F(D,{key:0,onOnClick:e.subCategoryDropdownClick,class:"h-10"},{select:r(()=>[i(O,{placeholder:e.$t("core__be_subcategory"),border:e.selected_sub_cat!==""&&e.selected_sub_cat!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_sub_cat==""||e.selected_sub_cat=="all"?"":e.selectedSubcategory.name},null,8,["placeholder","border","selectedValue"])]),list:r(()=>[c("div",We,[c("div",Ge,[c("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:s[5]||(s[5]=t=>e.handleSubcategoryfilter("all"))},[i(p,{class:"text-gray-200 ms-2"},{default:r(()=>[u(m(e.$t("core__be_select_all")),1)]),_:1})]),(d(!0),b(j,null,L(e.subCategories,t=>(d(),b("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:C=>e.handleSubcategoryfilter(t.id)},[i(p,{class:T(["ms-2",t.id==e.selected_sub_cat?" font-bold":""])},{default:r(()=>[u(m(t.name),1)]),_:2},1032,["class"])],8,Ke))),128))])])]),loadmore:r(()=>[e.subCategory_loadmore_visible?(d(),b("div",{key:0,onClick:s[6]||(s[6]=t=>e.subCategoryDropdownClick(!0)),class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[c("div",Me,[i(p,{class:"ms-2"},{default:r(()=>[u(m(e.is_loading?e.$t("core__be_loading"):e.$t("core__be_load_more")),1)]),_:1}),i(h,{theme:"text-black dark:text-primary-900",name:"load",w:"16",h:"16"})])])):g("",!0)]),filter:r(()=>[c("div",Qe,[i(S,{class:"w-full h-10",theme:"bg-gray-100",rounded:"rounded-lg",value:e.subCatSearch,"onUpdate:value":s[7]||(s[7]=t=>e.subCatSearch=t),placeholder:e.$t("core__be_search")},{icon:r(()=>[i(h,{name:"search",class:"cursor-pointer"})]),_:1},8,["value","placeholder"])])]),_:1},8,["onOnClick"])):g("",!0),i(D,{onOnClick:e.purchaseOptionDropdownClick,align:"",class:"h-10"},{select:r(()=>[i(O,{placeholder:e.$t("core__be_purchased_option"),border:e.selected_purchase_option!==""&&e.selected_purchase_option!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_purchase_option==""||e.selected_purchase_option=="all"?"":e.selectedPurchaseOption.name},null,8,["placeholder","border","selectedValue"])]),list:r(()=>[c("div",Xe,[c("div",Ye,[c("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:s[8]||(s[8]=t=>e.handlePurchaseOptionFilter("all"))},[i(p,{class:"text-gray-200 ms-2"},{default:r(()=>[u(m(e.$t("core__be_select_all")),1)]),_:1})]),(d(!0),b(j,null,L(e.purchaseOptions,t=>(d(),b("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:C=>e.handlePurchaseOptionFilter(t.id)},[i(p,{class:T(["ms-2",t.id==e.selected_purchase_option?" font-bold":""])},{default:r(()=>[u(m(t.name),1)]),_:2},1032,["class"])],8,Ze))),128))])])]),loadmore:r(()=>[e.purchaseOptions_loadmore_visible?(d(),b("div",{key:0,onClick:s[9]||(s[9]=t=>e.purchaseOptionDropdownClick(!0)),class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[c("div",xe,[i(p,{class:"ms-2"},{default:r(()=>[u(m(e.is_loading?e.$t("core__be_loading"):e.$t("core__be_load_more")),1)]),_:1}),i(h,{theme:"text-black dark:text-primary-900",name:"load",w:"16",h:"16"})])])):g("",!0)]),_:1},8,["onOnClick"]),i(D,{onOnClick:e.dealOptionDropdownClick,align:"",class:"h-10"},{select:r(()=>[i(O,{placeholder:e.$t("core__be_deal_option"),border:e.selected_deal_option!==""&&e.selected_deal_option!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_deal_option==""||e.selected_deal_option=="all"?"":e.selectedDealOption.name},null,8,["placeholder","border","selectedValue"])]),list:r(()=>[c("div",et,[c("div",tt,[c("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:s[10]||(s[10]=t=>e.handleDealOptionFilter("all"))},[i(p,{class:"text-gray-200 ms-2"},{default:r(()=>[u(m(e.$t("core__be_select_all")),1)]),_:1})]),(d(!0),b(j,null,L(e.dealOptions,t=>(d(),b("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:C=>e.handleDealOptionFilter(t.id)},[i(p,{class:T(["ms-2",t.id==e.selected_purchase_option?" font-bold":""])},{default:r(()=>[u(m(t.name),1)]),_:2},1032,["class"])],8,lt))),128))])])]),loadmore:r(()=>[e.dealOptions_loadmore_visible?(d(),b("div",{key:0,onClick:s[11]||(s[11]=t=>e.dealOptionDropdownClick(!0)),class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[c("div",rt,[i(p,{class:"ms-2"},{default:r(()=>[u(m(e.is_loading?e.$t("core__be_loading"):e.$t("core__be_load_more")),1)]),_:1}),i(h,{theme:"text-black dark:text-primary-900",name:"load",w:"16",h:"16"})])])):g("",!0)]),_:1},8,["onOnClick"]),e.reRenderDate?(d(),F(I,{key:1,placeholder:e.$t("core__be_select_date"),onDatepick:e.handleDateFilter,class:T(["rounded shadow-sm pt-0.5 focus:outline-none focus:ring-1 focus:ring-primary-500",(e.selected_date==null||e.selected_date=="","w-full")]),value:e.selected_date,"onUpdate:value":s[12]||(s[12]=t=>e.selected_date=t),range:!0,inline:!1,autoApply:!1},null,8,["placeholder","onDatepick","class","value"])):g("",!0)]),tableRow:r(t=>[t.field==e.itmPurchasedOption+"@@name"?(d(),b("span",at,[t.row[e.itmPurchasedOption+"@@name"]?(d(),F(f,{key:0,theme:"text-green-600 bg-green-50",class:""},{default:r(()=>[u(m(t.row[e.itmPurchasedOption+"@@name"]),1)]),_:2},1024)):g("",!0)])):g("",!0),t.field==e.itmItemType+"@@name"?(d(),b("span",ot,[t.row[e.itmItemType+"@@name"]?(d(),F(f,{key:0,theme:"text-red-600 bg-red-50",class:""},{default:r(()=>[u(m(t.row[e.itmItemType+"@@name"]),1)]),_:2},1024)):g("",!0)])):g("",!0),t.field==e.itmConditionOfItem+"@@name"?(d(),b("span",it,[t.row[e.itmConditionOfItem+"@@name"]?(d(),F(f,{key:0,theme:"text-red-600 bg-red-50",class:""},{default:r(()=>[u(m(t.row[e.itmConditionOfItem+"@@name"]),1)]),_:2},1024)):g("",!0)])):g("",!0),t.field=="detail"?(d(),b("div",st,[i(w,{onClick:C=>e.handleDetail(t.row.id)},{default:r(()=>[u(m(e.$t("core__be_btn_detail")),1)]),_:2},1032,["onClick"])])):g("",!0)]),_:1},8,[":row","search","object","colFilterOptions","columns","sort_field","sort_order","globalSearchPlaceholder","onFilterOptionshandle","onHandleSort","onHandleSearch","onHandleRow","searchable"])]),_:1})],64)}var zt=je(Re,[["render",nt]]);export{zt as default};
