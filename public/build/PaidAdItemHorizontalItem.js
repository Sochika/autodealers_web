import H from"./PsLabel2.js";import O from"./PsLabelCaption22.js";import b from"./PaidAdItemPaidStatus.js";import R from"./PsCard2.js";import E from"./PsIcon2.js";import q from"./PsLine.js";import G from"./PsButton2.js";import J from"./PsRouteLink.js";import K from"./PsLoadingDialog3.js";import{aC as Q,B as k,i as M,r as S,Q as W,o as w,c as C,a as d,b as o,w as f,f as F,m as A,n as X,p as g,t as u,g as z,F as Y,J as L,O as Z}from"./app.js";import{f as $}from"./format.min.js";import{P as N}from"./ps_constants.js";import{P as j}from"./PsObject.js";import{P as U}from"./Product.js";import{a as tt,P as D}from"./PsApiService2.js";import{m as et}from"./PsSepetetedStore.js";import{P as V}from"./PsValueStore.js";import{u as at}from"./PsValueHolder.js";import{u as it}from"./AppInfoStore.js";import{u as st}from"./FavouriteItemStore.js";import{A as dt}from"./AppInfoParameterHolder.js";import{h as ot}from"./moment.js";import{_ as rt}from"./plugin-vue_export-helper.js";class P extends j{constructor(){super(...arguments),this.id="",this.itemId="",this.startDate="",this.startTimeStamp="",this.endDate="",this.endTimeStamp="",this.amount="",this.paymentMethod="",this.transCode="",this.status="",this.addedDate="",this.addedUserId="",this.updatedDate="",this.updatedUserId="",this.updatedFlag="",this.addedDateStr="",this.paidStatus="",this.item=new U}init(t,e,a,p,n,h,c,r,x,y,i,m,_,l,v,I,T,B){return this.id=t,this.itemId=e,this.startDate=a,this.startTimeStamp=p,this.endTimeStamp=h,this.endDate=n,this.amount=c,this.paymentMethod=r,this.transCode=x,this.status=y,this.addedDate=i,this.addedUserId=m,this.updatedDate=_,this.updatedUserId=l,this.updatedFlag=v,this.addedDateStr=I,this.paidStatus=T,this.item=B,this}getPrimaryKey(){return this.id}toMap(t){const e={};return e.id=t.id,e.item_id=t.itemId,e.start_date=t.startDate,e.start_timestamp=t.startTimeStamp,e.end_timestamp=t.endTimeStamp,e.end_date=t.endDate,e.amount=t.amount,e.payment_method=t.paymentMethod,e.trans_code=t.transCode,e.status=t.status,e.added_date=t.addedDate,e.added_user_id=t.addedUserId,e.updated_date=t.updatedDate,e.updated_user_id=t.updatedUserId,e.updated_flag=t.updatedFlag,e.added_date_str=t.addedDateStr,e.paid_status=t.paidStatus,e.item=new U().toMap(t.item),e}toMapList(t){const e=[];for(let a=0;a<t.length;a++)t[a]!=null&&e.push(this.toMap(t[a]));return e}fromMap(t){return new P().init(t.id,t.item_id,t.start_date,t.start_timestamp,t.end_date,t.end_timestamp,t.amount,t.payment_method,t.trans_code,t.status,t.added_date,t.added_user_id,t.updated_date,t.updated_user_id,t.updated_flag,t.added_date_str,t.paid_status,new U().fromMap(t.item))}fromMapList(t){const e=[];for(const a in t)a!=null&&e.push(this.fromMap(a));return e}}const mt=et(s=>Q(`aidAdItemStore/${s}`,()=>{const t=k(new tt),e=k({value:!1});let a=M(4),p=0;const n=k({value:!1});let h="";function c(i){var m,_;t!=null&&t.data!=null&&t.data.length>0&&p!=0?(i.data!=null&&i.data.length>0?(((m=i.data)==null?void 0:m.length)<a.value?n.value=!0:n.value=!1,t.data.push(...i.data)):n.value=!0,t.code=i.code,t.status=i.status,t.message=i.message):(((_=i.data)==null?void 0:_.length)<a.value?n.value=!0:n.value=!1,t.data=i.data,t.code=i.code,t.status=i.status,t.message=i.message),t!=null&&t.data!=null&&(p=t.data.length)}async function r(i){e.value=!0;const m=await D.getPaidAdItemList(new P,i,a.value,p);c(m),e.value=!1}async function x(i){p=0,e.value=!0;const m=await D.getPaidAdItemList(new P,i,a.value,p);c(m),e.value=!1}async function y(i){e.value=!0;const m=0,_=t.data.length,l=await D.getPaidAdItemList(new P,i,_,m);t.data=l.data,t.code=l.code,t.status=l.status,t.message=l.message,e.value=!1}return{isNoMoreRecord:n,paidAdItemList:t,loading:e,limit:a,offset:p,id:h,loadPaidAdItemList:r,resetPaidAdItemList:x,updatePaidAdItemList:c,refleshPaidAdItemList:y}})),nt={name:"PaidAdItemHorizontalItem",components:{PsLabel:H,PsLabelCaption2:O,PsButton:G,PsCard:R,PsRouteLink:J,PsIcon:E,PsLine:q,PaidAdItemPaidStatus:b,PsLoadingDialog:K},props:{paiditem:{type:P},onClick:Function},setup(){var i,m,_;V.psValueStore=at();const s=mt(),t=V(),e=st(),a=t.getLoginUserId(),p=new dt;p.userId=a;const n=it(),h=M(!1);((_=(m=(i=n==null?void 0:n.appInfo)==null?void 0:i.data)==null?void 0:m.mobileSetting)==null?void 0:_.is_show_owner_info)=="1"&&(h.value=!0);const c=M();function r(l){var v;return l.toString()=="0"?L("item_price__free"):$((v=n.appInfo.data.mobileSetting)==null?void 0:v.price_format,l)}async function x(l){a&&a!=N.NO_LOGIN_USER?(c.value.openModal(),l.isFavourited=="1"?c.value.message=L("item_detail__removing_item_from_favourite"):c.value.message=L("item_detail__adding_item_to_favourite"),await e.postFavourite(l.id,a),await y(),c.value.closeModal()):Z.Inertia.get(route("login"))}async function y(){await s.refleshPaidAdItemList(a)}return{itempaidProvider:s,formatPrice:r,psValueStore:t,PsConst:N,appInfoStore:n,favouriteClicked:x,ps_loading_dialog:c,showProfile:h,moment:ot}}},lt={class:"relative"},ut={class:"overflow-hidden lg:h-56 h-36 w-full"},ft={alt:"Placeholder",class:"transform transition duration-500 hover:scale-110 block lg:hidden object-cover w-screen lg:h-56 h-36",width:"640px",height:"360px"},ct={alt:"Placeholder",class:"transform transition duration-500 hover:scale-110 lg:block hidden object-cover w-screen lg:h-56 h-36",width:"640px",height:"360px"},_t={class:""},pt={class:""},ht={class:"flex items-center gap-2"},gt={class:"flex items-center"},xt={class:"float-end"},vt={class:"flex items-center"},yt={class:"float-end"},St={class:"flex items-center"},Pt={key:0,class:"pt-1 pb-2 flex items-center justify-between leading-none px-2 rounded-b-xl lg:rounded-b-2xl"},wt={class:"flex flex-row items-center no-underline text-feAchromatic-900"},It={class:"relative"},kt={alt:"Placeholder",class:"rounded-full bg-transparent lg:w-8 lg:h-8 w-6 h-6 flex items-center justify-center object-cover",width:"50px",height:"50px"},Ct={key:0,class:"w-3 h-3 bg-feInfo-500 rounded-full flex justify-center items-center absolute bottom-0 right-0"},At={class:"ms-2 mt-1 text-sm flex-grow"},Lt={class:"flex"};function Ut(s,t,e,a,p,n){const h=S("ps-icon"),c=S("paid-ad-item-paid-status"),r=S("ps-label"),x=S("ps-route-link"),y=S("ps-card"),i=S("ps-loading-dialog"),m=W("lazy");return w(),C(Y,null,[d("div",{class:"cursor-pointer sm:w-full md:w-full",onClick:t[1]||(t[1]=_=>e.onClick!=null?e.onClick(e.paiditem):null)},[o(y,{class:"lg:rounded-lg rounded-lg shadow-sm relative z-0",enabledHover:!0},{default:f(()=>{var _,l;return[d("div",{class:"absolute z-10 bg-feAchromatic-50 dark_bg-feSecondary-800 rounded w-10 h-10 flex justify-center items-center right-2 top-2",onClick:t[0]||(t[0]=v=>a.favouriteClicked(e.paiditem.item))},[e.paiditem.item.isFavourited=="1"?(w(),F(h,{key:0,textColor:"text-fePrimary-500 dark_text-feAchromatic-50",class:"",name:"heart",h:"24",w:"24"})):(w(),F(h,{key:1,textColor:"text-fePrimary-500 dark_text-feAchromatic-50",class:"",name:"heart-outline",h:"24",w:"24"}))]),o(x,{to:{name:"fe_item_detail",query:{item_id:e.paiditem.item.id}}},{default:f(()=>[d("div",lt,[d("div",ut,[A(d("img",ft,null,512),[[m,{src:s.$page.props.thumb2xUrl+"/"+e.paiditem.item.defaultPhoto.imgPath,loading:s.$page.props.sysImageUrl+"/loading_gif.gif",error:s.$page.props.sysImageUrl+"/default_photo.png"}]]),A(d("img",ct,null,512),[[m,{src:s.$page.props.thumb2xUrl+"/"+e.paiditem.item.defaultPhoto.imgPath,loading:s.$page.props.sysImageUrl+"/loading_gif.gif",error:s.$page.props.sysImageUrl+"/default_photo.png"}]])]),o(c,{status:e.paiditem?e.paiditem.paidStatus:""},null,8,["status"])]),d("div",{class:X([a.showProfile?"pb-0":"pb-2","pt-2 px-2 flex flex-col gap-2"])},[d("div",_t,[o(r,{textColor:"text-feSecondary-600 dark_text-feSecondary-200 text-sm"},{default:f(()=>[g(u(e.paiditem.item.title),1)]),_:1})]),d("div",pt,[o(r,{textColor:"font-semibold text-fePrimary-500 text-base"},{default:f(()=>[g(u(e.paiditem?e.paiditem.item.itemCurrency.currencySymbol:"")+" "+u(a.formatPrice(e.paiditem?e.paiditem.item.price:"")),1)]),_:1})]),d("div",ht,[o(h,{name:"location",w:"14",h:"14",viewBox:"0 0 14 14"}),o(r,{textColor:"text-feSecondary-600 dark_text-feSecondary-200 text-sm"},{default:f(()=>[g(u(e.paiditem.item.itemLocation.name),1)]),_:1})]),d("div",gt,[o(r,{textColor:"text-feSecondary-600 dark_text-feSecondary-200 text-sm sm:text-xs md:text-sm"},{default:f(()=>[g(u(s.$t("paid_item_horizontal_item__start")),1)]),_:1}),o(r,{textColor:"text-feSecondary-600 dark_text-feSecondary-200 text-sm sm:text-xs md:text-sm grow ms-1"},{default:f(()=>[g(": "+u(e.paiditem?a.moment(e.paiditem.startDate.split(" ")[0]).format(s.$page.props.dateFormat):"")+" ",1),d("span",xt,u(e.paiditem?e.paiditem.startDate.split(" ")[1]:""),1)]),_:1})]),d("div",vt,[o(r,{textColor:"text-feSecondary-600 dark_text-feSecondary-200 text-sm sm:text-xs md:text-sm"},{default:f(()=>[g(u(s.$t("paid_item_horizontal_item__end")),1)]),_:1}),o(r,{textColor:"text-feSecondary-600 dark_text-feSecondary-200 text-sm sm:text-xs md:text-sm grow ms-3"},{default:f(()=>[g(": "+u(e.paiditem?a.moment(e.paiditem.endDate.split(" ")[0]).format(s.$page.props.dateFormat):"")+" ",1),d("span",yt,u(e.paiditem?e.paiditem.endDate.split(" ")[1]:""),1)]),_:1})]),d("div",St,[o(r,{textColor:"text-feSecondary-600 dark_text-feSecondary-200 text-sm sm:text-xs md:text-sm"},{default:f(()=>[g(u(s.$t("paid_item_horizontal_item__total_spending"))+" : ",1)]),_:1}),o(r,{textColor:"text-feSecondary-600 dark_text-feSecondary-200 text-sm sm:text-xs md:text-sm grow ms-1"},{default:f(()=>[g(u(e.paiditem?e.paiditem.item.itemCurrency.currencySymbol:"")+" "+u(e.paiditem?e.paiditem.amount:""),1)]),_:1})])],2)]),_:1},8,["to"]),o(x,{to:{name:"fe_other_profile",params:{userId:(l=(_=e.paiditem.item)==null?void 0:_.user)==null?void 0:l.userId}}},{default:f(()=>{var v,I;return[a.showProfile?(w(),C("div",Pt,[d("div",wt,[d("div",It,[A(d("img",kt,null,512),[[m,{src:s.$page.props.thumb1xUrl+"/"+((I=(v=e.paiditem.item)==null?void 0:v.user)==null?void 0:I.userCoverPhoto),loading:s.$page.props.sysImageUrl+"/loading_gif.gif",error:s.$page.props.sysImageUrl+"/default_photo.png"}]]),e.paiditem.item.user.isVerifybluemark=="1"?(w(),C("div",Ct,[o(h,{name:"bluemark",textColor:"text-feSecondary-50",w:"8",h:"8"})])):z("",!0)]),d("p",At,[d("span",Lt,[o(r,{class:"truncate text-xs",textColor:"text-feSecondary-800 dark_text-feSecondary-300"},{default:f(()=>[g(u(e.paiditem.item.user.userName.length>12?e.paiditem.item.user.userName.slice(0,12)+" ...":e.paiditem.item.user.userName),1)]),_:1})]),o(r,{class:"font-light text-xs",textColor:"text-feSecondary-500 dark_text-feSecondary-500"},{default:f(()=>[g(u(e.paiditem.item?a.moment(e.paiditem.item.addedDate).format(s.$page.props.dateFormat):""),1)]),_:1})])])])):z("",!0)]}),_:1},8,["to"])]}),_:1})]),o(i,{ref:"ps_loading_dialog"},null,512)],64)}var Dt=rt(nt,[["render",Ut]]),te=Object.freeze(Object.defineProperty({__proto__:null,default:Dt},Symbol.toStringTag,{value:"Module"}));export{Dt as P,te as a,mt as u};
